(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();console.log("üöÄ SKRIPTI FILLOI: debugGridMobile.js po ekzekutohet...");(function(){function l(){console.log("üìè --- FILLIMI I MATJEVE ---");const o=document.documentElement,n=document.querySelector(".game-container"),s=document.querySelector(".game-grid"),i=document.querySelector(".game-area"),g=getComputedStyle(o).getPropertyValue("--grid-cell-size").trim(),r=getComputedStyle(o).getPropertyValue("--game-grid-padding").trim(),d=getComputedStyle(o).getPropertyValue("--game-grid-border").trim(),c=getComputedStyle(o).getPropertyValue("--game-grid-content-size").trim(),a=getComputedStyle(o).getPropertyValue("--game-grid-total-size").trim(),u=getComputedStyle(o).getPropertyValue("--view-height").trim(),m=getComputedStyle(o).getPropertyValue("--mobile-grid-max-size").trim();if(console.group("üéÆ MOBILE GRID DEBUG"),console.log("%cCSS Variables:","color: #FFD700; font-weight: bold;"),console.log("--grid-cell-size:",g),console.log("--game-grid-padding:",r),console.log("--game-grid-border:",d),console.log("--game-grid-content-size:",c),console.log("--game-grid-total-size:",a),console.log("--view-height:",u),console.log("--mobile-grid-max-size:",m),n){const f=n.getBoundingClientRect();console.log("%c.game-container:","color: #FF00FF; font-weight: bold;"),console.log(`Has .hidden: ${n.classList.contains("hidden")}`),console.log(`Width: ${f.width}px, Height: ${f.height}px`)}else console.warn("‚ö†Ô∏è .game-container nuk ekziston n√´ DOM!");if(i){const f=i.getBoundingClientRect();console.log("%c.game-area (actual):","color: #FF69B4; font-weight: bold;"),console.log(`Width: ${f.width}px, Height: ${f.height}px`),console.log(`Display: ${getComputedStyle(i).display}`),console.log(`Visibility: ${getComputedStyle(i).visibility}`)}else console.warn("‚ö†Ô∏è PARALAJM√ãRIM: .game-area nuk u gjet!");if(s){const f=s.getBoundingClientRect();console.log("%c.game-grid (actual):","color: #00BFFF; font-weight: bold;"),console.log(`Width: ${f.width}px, Height: ${f.height}px`),console.log(`Padding: ${getComputedStyle(s).padding}`),console.log(`Display: ${getComputedStyle(s).display}`),console.log(`Visibility: ${getComputedStyle(s).visibility}`)}else console.error("‚ùå GABIM: Elementi .game-grid NUK u gjet n√´ DOM!");console.log("%cViewport:","color: #FF1493; font-weight: bold;"),console.log(`Window width: ${window.innerWidth}px`),console.log(`Window height: ${window.innerHeight}px`),console.log(`Is mobile (<= 768px): ${window.innerWidth<=768}`),console.groupEnd(),console.log("üìè --- FUNDI I MATJEVE ---")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();const e=new MutationObserver(()=>{const o=document.querySelector(".game-container");o&&!o.classList.contains("hidden")&&(console.log("üîÑ GAME STARTED - Re-running grid measurements..."),setTimeout(()=>{l(),window.debugGrid=l},100))}),t=document.querySelector(".game-container");t&&e.observe(t,{attributes:!0,attributeFilter:["class"]}),window.debugGrid=l})();const F="modulepreload",$=function(l){return"/BlokusFocus/"+l},I={},O=function(e,t,o){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),g=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(t.map(r=>{if(r=$(r),r in I)return;I[r]=!0;const d=r.endsWith(".css"),c=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const a=document.createElement("link");if(a.rel=d?"stylesheet":F,d||(a.as="script"),a.crossOrigin="",a.href=r,g&&a.setAttribute("nonce",g),document.head.appendChild(a),d)return new Promise((u,m)=>{a.addEventListener("load",u),a.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})}))}function s(i){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=i,window.dispatchEvent(g),!g.defaultPrevented)throw i}return n.then(i=>{for(const g of i||[])g.status==="rejected"&&s(g.reason);return e().catch(s)})};let x=!1;function q(){const l=!x;x=!0;const e=document.createElement("div");e.className="modal-overlay";const t=`
        <div class="modal-content tutorial-modal">
            <h2>How to Play</h2>
            <div class="tutorial-container">
                <div class="tutorial-score" id="tutorial-score">Score: 0</div>
                <div class="tutorial-grid" id="tutorial-grid"></div>
                <div class="tutorial-piece-area">
                    <div class="tutorial-piece" id="tutorial-piece">
                        <div class="p-block"></div><div class="p-block"></div><div class="p-block"></div><div class="p-block"></div>
                    </div>
                    <div class="tutorial-finger" id="tutorial-finger"><i class="fa-solid fa-hand-pointer"></i></div>
                </div>
            </div>
            <button class="modal-close-btn">Got it!</button>
        </div>`;e.innerHTML=t,document.body.appendChild(e),document.body.classList.add("no-scroll");const o=()=>{document.body.contains(e)&&(document.body.removeChild(e),document.body.classList.remove("no-scroll"))};e.querySelector(".modal-close-btn").addEventListener("click",o),e.addEventListener("click",n=>{n.target===e&&o()}),l&&z()}function z(){const l=document.getElementById("tutorial-grid"),e=document.getElementById("tutorial-score"),t=document.getElementById("tutorial-piece"),o=document.getElementById("tutorial-finger");!l||!e||!t||!o||(A(l),P(l),B(t),D(l,e,t,o))}function C(l){const e=document.createElement("div");e.className="block";const o=l||{dark1:"#d64e1f",dark2:"#a3320f",coreLight:"rgba(255, 187, 166, 0.8)",coreMid:"rgba(255, 137, 98, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(80, 24, 0, 0.4)",highlight:"rgba(230, 240, 255, 0.5)"};return e.style.setProperty("--color-dark-1",o.dark1),e.style.setProperty("--color-dark-2",o.dark2),e.style.setProperty("--color-core-light",o.coreLight),e.style.setProperty("--color-core-mid",o.coreMid),e.style.setProperty("--color-bevel-light",o.bevelLight),e.style.setProperty("--color-bevel-dark",o.bevelDark),e.style.setProperty("--color-highlight",o.highlight),e}function A(l){l.innerHTML="";const e=Array.from({length:100},()=>{const t=document.createElement("div");return t.classList.add("grid-cell"),l.appendChild(t),t});l._cells=e}function P(l){const e=l._cells,t=5,o={dark1:"#14b8a6",dark2:"#0f766e",coreLight:"rgba(166, 246, 237, 0.8)",coreMid:"rgba(109, 235, 224, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(0, 77, 70, 0.4)",highlight:"rgba(255, 255, 240, 0.5)"};for(let n=0;n<10;n++)(n<3||n>6)&&e[t*10+n].appendChild(C(o))}function B(l){l.innerHTML="";for(let e=0;e<4;e++){const t=C();l.appendChild(t)}}function D(l,e,t,o){const n=l._cells;setTimeout(()=>{o.style.opacity="1",o.style.transform="translate(0, 0)"},500),setTimeout(()=>{t.style.transform="scale(0.9)"},1500),setTimeout(()=>{const s=n[53].getBoundingClientRect(),i=t.getBoundingClientRect(),g=s.left-i.left,r=s.top-i.top;o.style.transform=`translate(${g}px, ${r}px)`,t.style.transform=`translate(${g}px, ${r}px)`},2e3),setTimeout(()=>{t.style.opacity="0",o.style.opacity="0",[53,54,55,56].forEach(i=>{n[i].appendChild(C())})},3500),setTimeout(()=>{for(let i=0;i<10;i++){const r=n[50+i].querySelector(".block");r&&r.classList.add("clearing")}},4200),setTimeout(()=>{e.textContent="Score: 100",e.classList.add("updated")},4700),setTimeout(()=>{e.classList.remove("updated")},5e3),setTimeout(()=>{H(l,e,t,o)},6e3)}function H(l,e,t,o){e.textContent="Score: 0",e.classList.remove("updated"),t.style.transform="scale(1)",t.style.opacity="1",o.style.opacity="0",o.style.transform="translate(0, 50px)",A(l),P(l),B(t),setTimeout(()=>{D(l,e,t,o)},1e3)}function N(){function l(){const d=document.querySelector('[data-mode="classic"] .piece-showcase'),c=document.querySelector('[data-mode="collection"] .piece-showcase');if(!d||!c)return;const a=d.querySelectorAll(".block"),u=c.querySelectorAll(".block"),m=[{dark1:"#2a7dcc",dark2:"#164d85",coreLight:"rgba(168, 208, 255, 0.8)",coreMid:"rgba(94, 174, 255, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(15, 52, 92, 0.4)",highlight:"rgba(255, 235, 225, 0.5)"},{dark1:"#d64e1f",dark2:"#a3320f",coreLight:"rgba(255, 187, 166, 0.8)",coreMid:"rgba(255, 137, 98, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(80, 24, 0, 0.4)",highlight:"rgba(230, 240, 255, 0.5)"},{dark1:"#34c759",dark2:"#1d8a3c",coreLight:"rgba(170, 255, 195, 0.8)",coreMid:"rgba(117, 255, 150, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(0, 74, 15, 0.4)",highlight:"rgba(255, 255, 230, 0.5)"},{dark1:"#705ce1",dark2:"#4d38ba",coreLight:"rgba(213, 204, 255, 0.8)",coreMid:"rgba(175, 159, 255, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(38, 23, 105, 0.4)",highlight:"rgba(230, 255, 235, 0.5)"},{dark1:"#cd5498",dark2:"#9e3670",coreLight:"rgba(250, 187, 218, 0.8)",coreMid:"rgba(246, 137, 195, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(77, 21, 52, 0.4)",highlight:"rgba(230, 255, 235, 0.5)"},{dark1:"#d4c22b",dark2:"#a0920c",coreLight:"rgba(255, 255, 171, 0.8)",coreMid:"rgba(255, 255, 122, 0.5)",bevelLight:"rgba(255, 255, 255, 0.2)",bevelDark:"rgba(77, 69, 0, 0.4)",highlight:"rgba(235, 230, 255, 0.5)"}],f=[{name:"cross",coords:[{t:0,l:33.3},{t:33.3,l:0},{t:33.3,l:33.3},{t:33.3,l:33.3*2},{t:33.3*2,l:33.3}],colorIndex:0},{name:"ushape",coords:[{t:0,l:0},{t:33.3,l:0},{t:33.3,l:33.3},{t:33.3,l:33.3*2},{t:0,l:33.3*2}],colorIndex:1},{name:"fshape_new",coords:[{t:33.3,l:0},{t:0,l:33.3},{t:33.3,l:33.3},{t:33.3*2,l:33.3},{t:33.3,l:33.3*2}],colorIndex:2}],h=[{name:"lshape",coords:[{t:0,l:0},{t:33.3,l:0},{t:33.3*2,l:0},{t:33.3*2,l:33.3}],colorIndex:3},{name:"square",coords:[{t:0,l:0},{t:0,l:33.3},{t:33.3,l:0},{t:33.3,l:33.3}],colorIndex:4},{name:"tshape",coords:[{t:0,l:33.3},{t:33.3,l:0},{t:33.3,l:33.3},{t:33.3,l:33.3*2}],colorIndex:5}];let E=0,T=0;const v=(S,k)=>{const y=m[k.colorIndex],L={t:33.3,l:33.3};S.forEach((p,b)=>{p.style.transitionDelay=`${b*30}ms`,p.style.opacity!=="0"&&(p.style.top=`${L.t}%`,p.style.left=`${L.l}%`)}),setTimeout(()=>{S.forEach((p,b)=>{p.style.transitionDelay=`${b*60}ms`,p.style.setProperty("--color-dark-1",y.dark1),p.style.setProperty("--color-dark-2",y.dark2),p.style.setProperty("--color-core-light",y.coreLight),p.style.setProperty("--color-core-mid",y.coreMid),p.style.setProperty("--color-bevel-light",y.bevelLight),p.style.setProperty("--color-bevel-dark",y.bevelDark),p.style.setProperty("--color-highlight",y.highlight),k.coords[b]?(p.style.opacity="1",p.style.top=`${k.coords[b].t}%`,p.style.left=`${k.coords[b].l}%`):p.style.opacity="0"})},750)};v(a,f[0]),v(u,h[0]),setInterval(()=>{E=(E+1)%f.length,v(a,f[E])},2500),setInterval(()=>{T=(T+1)%h.length,v(u,h[T])},2500)}function e(r,d){if(r==="tutorial"){q();return}const c=document.createElement("div");c.className="modal-overlay";const a=`<div class="modal-content"><h2>${r}</h2><p>${d}</p><button class="modal-close-btn">Close</button></div>`;c.innerHTML=a,document.body.appendChild(c);const u=()=>{document.body.contains(c)&&document.body.removeChild(c)};c.querySelector(".modal-close-btn").addEventListener("click",u),c.addEventListener("click",m=>{m.target===c&&u()})}const t=document.querySelector(".special-actions");t&&t.classList.add("hidden"),l(),function(){const d=document.getElementById("highscore-display");d&&(d.textContent=localStorage.getItem("blokusHighScore")||"0");const c=document.getElementById("pieces-unlocked");if(c){let a=7;const u=parseInt(localStorage.getItem("blokusHighScore")||"0");u>=2e3&&(a+=6),u>=4e3&&(a+=6),u>=6e3&&(a+=6),u>=8e3&&(a+=5),c.textContent=Math.min(a,30)}}(),document.querySelectorAll(".stat-value").forEach(r=>{const d=+r.getAttribute("data-target")||parseInt(r.textContent);let c=0;const a=d/100,u=()=>{c<d?(c+=a,r.innerText=Math.ceil(c),requestAnimationFrame(u)):r.innerText=d};setTimeout(()=>{u()},500)});const n=document.getElementById("how-to-play-btn");n&&n.addEventListener("click",()=>{e("tutorial")});const s=document.getElementById("contact-btn");s&&s.addEventListener("click",()=>{e("Contact","For any questions, contact us at: contact@blokusblast.com")});const i=document.querySelectorAll(".mode-button.selectable");let g=!1;i.forEach(r=>{r.addEventListener("click",function(){const d=this.dataset.mode;localStorage.setItem("selectedGameMode",d);const c=document.getElementById("landingPage"),a=document.querySelector(".game-container");if(a&&(a.classList.remove("hidden"),console.log("‚úÖ GAME CONTAINER VISIBLE - .hidden class removed"),console.log("üìè Grid should now be visible in .game-area > .game-grid")),g){if(c&&a){c.classList.add("hidden"),a.classList.remove("hidden"),window.selectedGameMode=d;const u=document.querySelector(".special-actions");u&&u.classList.remove("hidden"),typeof window.initializeGame=="function"&&window.initializeGame()}}else{O(async()=>{const{initMain:m}=await import("./main-4aBks_f5.js");return{initMain:m}},[]).then(({initMain:m})=>{m()}).catch(m=>{console.error("Lazy import failed:",m);try{const f=document.getElementById("clientImportErrorBanner");f&&f.remove();const h=document.createElement("div");h.id="clientImportErrorBanner",h.style.position="fixed",h.style.left="12px",h.style.right="12px",h.style.bottom="24px",h.style.zIndex="99999",h.style.background="linear-gradient(90deg,#ff6b6b,#ff4757)",h.style.color="#fff",h.style.padding="12px 16px",h.style.borderRadius="8px",h.style.boxShadow="0 6px 20px rgba(0,0,0,0.4)",h.style.fontSize="14px",h.style.lineHeight="1.2",h.textContent="Error loading game: "+(m&&m.message?m.message:String(m)),document.body.appendChild(h)}catch{}});const u=this.querySelector(".icon");u&&(u.innerHTML='<i class="fa-solid fa-spinner fa-spin" style="font-size: 2.5rem;"></i>'),setTimeout(()=>{if(c&&a){c.classList.add("hidden"),document.body.classList.remove("landing-page"),a.classList.remove("hidden"),window.selectedGameMode=d;const m=document.querySelector(".special-actions");m&&m.classList.remove("hidden"),typeof window.initializeGame=="function"&&window.initializeGame()}g=!0},1500)}})})}class V{constructor(){this.currentTheme=localStorage.getItem("blokus-theme")||"default",this.init()}init(){this.applyTheme(this.currentTheme),this.initToggleButtons(),this.updateIcons()}initToggleButtons(){const e=document.getElementById("darkModeToggleGame");e&&e.addEventListener("click",()=>this.toggleTheme());const t=document.getElementById("theme-toggle");t&&t.addEventListener("click",()=>this.toggleTheme())}toggleTheme(){const e=this.currentTheme==="dark"?"default":"dark";this.setTheme(e)}setTheme(e){this.currentTheme=e,this.applyTheme(e),this.saveTheme(e),this.updateIcons(),window.dispatchEvent(new CustomEvent("themeChanged",{detail:{theme:e}}))}applyTheme(e){document.body.setAttribute("data-theme",e);const t=document.querySelector(".game-container");e==="dark"?(document.body.classList.contains("landing-page")||(document.body.style.setProperty("background","linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #16213e 75%, #1a1a2e 100%)","important"),document.body.style.setProperty("background-size","400% 400%","important"),document.body.style.setProperty("animation","dark-gradient-animation 30s ease infinite","important")),t&&t.style.setProperty("background",`
                        radial-gradient(circle at 15% 20%, rgba(135, 206, 235, 0.3) 0%, transparent 45%),
                        radial-gradient(circle at 80% 70%, rgba(100, 149, 237, 0.4) 0%, transparent 45%),
                        radial-gradient(circle at 40% 85%, rgba(72, 61, 139, 0.4) 0%, transparent 45%),
                        radial-gradient(circle at 65% 25%, rgba(25, 25, 112, 0.5) 0%, transparent 45%),
                        linear-gradient(135deg, #1a1a2e, #16213e, #0f3460, #16213e)
                    `,"important")):(document.body.style.removeProperty("background"),document.body.style.removeProperty("background-size"),document.body.style.removeProperty("animation"),t&&t.style.removeProperty("background")),document.body.offsetHeight;const o=document.querySelector('meta[name="theme-color"]');o&&(o.content=e==="dark"?"#1a1a2e":"#667eea");let n;e==="dark"?n="linear-gradient(135deg, #FFD700 0%, #FBBF24 50%, #FFA500 100%)":e==="forest"?n="linear-gradient(135deg, #34d399 0%, #16a34a 100%)":n="linear-gradient(135deg, #34d399 0%, #10b981 50%, #059669 100%)",document.body.style.setProperty("--score-gradient",n,"important"),e==="dark"?(document.body.style.setProperty("--ghost-border-color","rgba(86,176,255,0.95)","important"),document.body.style.setProperty("--ghost-glow-color","rgba(86,176,255,0.55)","important"),document.body.style.setProperty("--ghost-fill-color","rgba(86,176,255,0.12)","important")):e==="forest"?(document.body.style.setProperty("--ghost-border-color","rgba(34,197,94,0.95)","important"),document.body.style.setProperty("--ghost-glow-color","rgba(34,197,94,0.5)","important"),document.body.style.setProperty("--ghost-fill-color","rgba(34,197,94,0.12)","important")):(document.body.style.setProperty("--ghost-border-color","rgba(255,229,59,0.95)","important"),document.body.style.setProperty("--ghost-glow-color","rgba(255,229,59,0.55)","important"),document.body.style.setProperty("--ghost-fill-color","rgba(255,229,59,0.12)","important"))}updateIcons(){const e=document.getElementById("darkModeIconGame"),t=this.currentTheme==="dark"?"fa-sun":"fa-moon",o=this.currentTheme==="dark"?"Switch to Light Mode":"Switch to Dark Mode";if(e){e.className=`fas ${t}`;const s=e.parentElement;s&&(s.setAttribute("title",o),s.setAttribute("aria-label",o),s.setAttribute("aria-pressed",this.currentTheme==="dark"?"true":"false"))}const n=document.getElementById("theme-toggle");if(n){const s=n.querySelector(".icon-moon"),i=n.querySelector(".icon-sun");s&&i&&(this.currentTheme==="dark"?(s.style.display="none",i.style.display="block"):(s.style.display="block",i.style.display="none"),n.setAttribute("title",o),n.setAttribute("aria-label",o),n.setAttribute("aria-pressed",this.currentTheme==="dark"?"true":"false"))}}saveTheme(e){localStorage.setItem("blokus-theme",e)}getCurrentTheme(){return this.currentTheme}detectSystemTheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"default"}enableAutoSwitch(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{const o=t.matches?"dark":"default";this.setTheme(o)})}}function _(){const l=new V;window.darkModeManager=l}function W(){M();let l;window.addEventListener("resize",function(){clearTimeout(l),l=setTimeout(M,300)})}function M(){const l=document.getElementById("gameStars");if(l){l.innerHTML="";const e=window.innerWidth<=768,t=e?80:200;for(let o=0;o<t;o++){const n=document.createElement("div");n.classList.add("star");const s=Math.random()*100,i=Math.random()*100;n.style.top=`${s}%`,n.style.left=`${i}%`;const g=e?3:5,r=Math.random()*g;n.style.width=`${r}px`,n.style.height=`${r}px`,n.style.animationDelay=`${Math.random()*5}s`,l.appendChild(n)}}}class U{constructor(){this.isActive=!1,this.particles=[],this.clickCount=0,this.requiredClicks=3,this.clickTimeout=null,this.colors=["#ff0096","#ff6900","#ffd700","#00bfff","#8a2be2","#32cd32","#ff4500","#ff1493","#00ced1","#ff69b4"],this.init()}init(){this.container=document.createElement("div"),this.container.className="color-burst-container",document.body.appendChild(this.container);const e=document.querySelector(".logo");e&&(e.addEventListener("click",t=>this.handleLogoClick(t)),e.style.cursor="pointer",e.setAttribute("title","Blokus ‚Äì Triple Click for Color Burst! üé® (0/3)"))}handleLogoClick(e){if(this.isActive)return;this.clickCount++;const t=e.target.closest(".logo");this.clickTimeout&&clearTimeout(this.clickTimeout),t.setAttribute("title",`Blokus ‚Äì Triple Click for Color Burst! üé® (${this.clickCount}/3)`),this.addClickFeedback(t,this.clickCount),this.clickCount>=this.requiredClicks?(t.setAttribute("title","Blokus ‚Äì Color Burst Activated! ‚ú®"),this.triggerColorBurst(e),this.resetClickCount()):this.clickTimeout=setTimeout(()=>{this.resetClickCount(),t.setAttribute("title","Blokus ‚Äì Triple Click for Color Burst! üé® (0/3)")},2e3)}resetClickCount(){this.clickCount=0,this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null)}addClickFeedback(e,t){e.style.transform=`scale(${1+t*.05})`,e.style.filter=`drop-shadow(0 0 ${t*5}px rgba(255, 229, 59, ${t*.3}))`,setTimeout(()=>{e.style.transform="",e.style.filter=""},200);const o=document.createElement("div");o.textContent=t,o.style.cssText=`
            position: absolute;
            top: -30px;
            right: -10px;
            background: #ff0096;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: click-bounce 0.5s ease-out;
            pointer-events: none;
            z-index: 1000;
        `,e.style.position="relative",e.appendChild(o),setTimeout(()=>o.remove(),500)}triggerColorBurst(e){if(this.isActive)return;this.isActive=!0;const t=e.target.closest(".logo"),o=t.getBoundingClientRect(),n=o.left+o.width/2,s=o.top+o.height/2;t.classList.add("color-burst-active"),setTimeout(()=>t.classList.remove("color-burst-active"),800),this.createRipple(n,s),this.createRainbowWave(),this.createParticleExplosion(n,s),this.createSparkleTrails(n,s),this.playSound(),setTimeout(()=>{this.cleanup(),this.isActive=!1},2500)}createRipple(e,t){for(let o=0;o<3;o++)setTimeout(()=>{const n=document.createElement("div");n.className="color-burst-ripple",n.style.left=`${e}px`,n.style.top=`${t}px`,n.style.transform="translate(-50%, -50%)",this.container.appendChild(n),setTimeout(()=>n.remove(),1500)},o*200)}createRainbowWave(){const e=document.createElement("div");e.className="rainbow-wave",document.body.appendChild(e),setTimeout(()=>e.remove(),1500)}createParticleExplosion(e,t){const o=window.innerWidth<=768?25:40;for(let n=0;n<o;n++)setTimeout(()=>{const s=document.createElement("div");s.className=`color-burst-particle ${this.getRandomSize()}`;const i=this.colors[Math.floor(Math.random()*this.colors.length)];s.style.background=`radial-gradient(circle, ${i}, ${i}88)`,s.style.boxShadow=`0 0 10px ${i}`,s.style.left=`${e}px`,s.style.top=`${t}px`,s.style.transform="translate(-50%, -50%)";const g=Math.PI*2*n/o+Math.random()*.5,r=100+Math.random()*200,d=e+Math.cos(g)*r,c=t+Math.sin(g)*r;s.style.setProperty("--end-x",`${d-e}px`),s.style.setProperty("--end-y",`${c-t}px`),s.style.animation="color-burst-explosion 2s ease-out forwards",s.style.animationDelay=`${Math.random()*.3}s`,this.container.appendChild(s),this.particles.push(s),setTimeout(()=>{s.remove();const a=this.particles.indexOf(s);a>-1&&this.particles.splice(a,1)},2e3)},n*20)}createSparkleTrails(e,t){const o=window.innerWidth<=768?15:25;for(let n=0;n<o;n++)setTimeout(()=>{const s=document.createElement("div");s.className="color-burst-sparkle";const i=this.colors[Math.floor(Math.random()*this.colors.length)];s.style.color=i;const g=(Math.random()-.5)*400,r=(Math.random()-.5)*400;s.style.left=`${e+g}px`,s.style.top=`${t+r}px`,s.style.transform="translate(-50%, -50%)",this.container.appendChild(s),setTimeout(()=>s.remove(),1200)},Math.random()*800)}getRandomSize(){const e=Math.random();return e<.3?"small":e<.7?"medium":"large"}playSound(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),o=e.createGain();t.connect(o),o.connect(e.destination),t.frequency.setValueAtTime(800,e.currentTime),t.frequency.exponentialRampToValueAtTime(200,e.currentTime+.1),o.gain.setValueAtTime(.1,e.currentTime),o.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),t.start(e.currentTime),t.stop(e.currentTime+.1)}catch{}}cleanup(){for(this.particles.forEach(e=>e.remove()),this.particles=[];this.container.firstChild;)this.container.removeChild(this.container.firstChild)}trigger(){const e=document.querySelector(".logo");e&&this.triggerColorBurst({target:e})}}function j(l){const e=document.getElementById("settingsModal");if(!e)return;e.style.display="flex";const t=document.getElementById("toggleSound"),o=document.getElementById("toggleMusic"),n=document.getElementById("toggleVibration");t&&t.addEventListener("change",i=>{localStorage.setItem("soundEnabled",i.target.checked)}),o&&o.addEventListener("change",i=>{localStorage.setItem("musicEnabled",i.target.checked)}),n&&n.addEventListener("change",i=>{localStorage.setItem("vibrationEnabled",i.target.checked),i.target.checked&&window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(100)});const s=i=>{const g=e.querySelector(".settings-modal-content");g&&g.contains(i.target)||R()};e._backdropHandler&&e.removeEventListener("click",e._backdropHandler),e._backdropHandler=s,e.addEventListener("click",s)}function R(){const l=document.getElementById("settingsModal");l&&(l.style.display="none",l._backdropHandler&&(l.removeEventListener("click",l._backdropHandler),l._backdropHandler=null))}function w(l){const e=document.getElementById("modal"),t=document.getElementById("modal-body");e&&t&&(e.style.display="flex",t.innerHTML=l)}function G(){const l=document.getElementById("modal");l&&(l.style.display="none")}function K(){w("<h2>How to Play</h2><p>Place blocks to fill lines and score points. <br> Use strategy to avoid blocking yourself! <br> <b>Classic:</b> Pure points. <br><b>Collection:</b> Unlock new shapes. <br>Can you beat your high score?</p>")}function Y(){w("<h2>Contact</h2><p>For any questions or feedback, please email:<br><b><a href='mailto:info@blokusblast.com'>info@blokusblast.com</a></b></p>")}function J(){w("<h2>Achievements</h2><ul style='text-align:left;padding-left:0;list-style:none;'><li>üèÜ High Score: <b>3,400</b></li><li>üîì All Pieces Unlocked!</li><li>üî• 10x Streak Bonus</li><li>üíé Discovered Secret Mode</li></ul>")}document.addEventListener("keydown",l=>{l.key==="Escape"&&G()});function te(){const l=document.getElementById("toggleSound"),e=document.getElementById("toggleMusic"),t=document.getElementById("toggleVibration");if(l){const o=localStorage.getItem("soundEnabled")!=="false";l.checked=o}if(e){const o=localStorage.getItem("musicEnabled")!=="false";e.checked=o}if(t){const o=localStorage.getItem("vibrationEnabled")!=="false";t.checked=o}}window.showSettingsModal=j;window.closeSettingsModal=R;window.showModal=w;window.closeModal=G;window.showHowToPlay=K;window.showContact=Y;window.showAchievements=J;const Q={"v2.3":"#ff0000","v2.4":"#ff7700","v2.5":"#ffdd00","v2.6":"#00ff00","v2.7":"#0088ff","v2.8":"#aa00ff","v2.9":"#ff00ff","v3.0":"#00ffff","v3.1":"#ff0088"};function X(){const l=document.querySelector('meta[name="app-version"]'),e=(l==null?void 0:l.getAttribute("content"))||"v0",t=document.getElementById("versionNumber");t&&(t.textContent=e);const o=document.getElementById("versionBadge");if(o){const n=Q[e]||"#ff0000";o.style.backgroundColor=n,o.style.boxShadow=`0 0 20px rgba(${Z(n)}, 0.8)`}}function Z(l){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:"255, 0, 0"}function ee(){console.clear(),console.log("%cüéÆ BLOKUS GRID - LOGGING SYSTEM ACTIVE üéÆ","color: #90CAF9; font-size: 18px; font-weight: bold; text-shadow: 0 0 10px rgba(144, 202, 249, 0.8);"),console.group("%cüìä CONSOLE LOGGER COMMANDS","color: #FFE66D; font-weight: bold; font-size: 14px;"),console.log("%cControl Logging:","color: #66BB6A; font-weight: bold;"),console.log("  ‚Ä¢ logger.LOG_ENABLED = false;          // Disable all logging"),console.log("  ‚Ä¢ logger.LOG_DRAG = false;             // Disable drag-drop logging"),console.log("  ‚Ä¢ logger.LOG_PLACEMENT = false;        // Disable placement logging"),console.log("  ‚Ä¢ logger.LOG_SCORE = false;            // Disable score logging"),console.log("  ‚Ä¢ logger.LOG_PERFORMANCE = false;      // Disable performance metrics"),console.log("  ‚Ä¢ logger.LOG_GRID = false;             // Disable grid state logging"),console.log("  ‚Ä¢ logger.LOG_ERRORS = false;           // Disable error logging"),console.groupEnd(),console.group("%cüìç WHAT TO LOOK FOR IN CONSOLE","color: #95E1D3; font-weight: bold; font-size: 14px;"),console.log("%c1. DRAG & DROP EVENTS (Red):","color: #FF6B6B; font-weight: bold;"),console.log("   - When piece drag starts/moves/ends"),console.log("   - Shows if placement is VALID ‚úì or INVALID ‚úó"),console.log(""),console.log("%c2. PLACEMENT & LINE CLEARS (Teal):","color: #4ECDC4; font-weight: bold;"),console.log("   - When pieces are placed successfully"),console.log("   - When lines are cleared"),console.log("   - How many cells are freed"),console.log(""),console.log("%c3. SCORE UPDATES (Yellow):","color: #FFE66D; font-weight: bold;"),console.log("   - Points earned for placements"),console.log("   - Line clear bonuses"),console.log("   - Combo multipliers"),console.log(""),console.log("%c4. PERFORMANCE METRICS (Mint):","color: #95E1D3; font-weight: bold;"),console.log("   - How long each operation takes (milliseconds)"),console.log("   - If any operation takes > 16ms (potential jank)"),console.log(""),console.log("%c5. GRID STATE (Blue):","color: #A8D8EA; font-weight: bold;"),console.log("   - Empty cells remaining"),console.log("   - Available moves count"),console.log(""),console.log("%c6. ERRORS & WARNINGS (Red):","color: #FF4444; font-weight: bold;"),console.log("   - Invalid placements"),console.log("   - Missing pieces"),console.log("   - Game logic errors"),console.groupEnd(),console.group("%cüí° HOW TO USE FOR DEBUGGING","color: #A8D8EA; font-weight: bold; font-size: 14px;"),console.log("%cExample 1: Drag feels laggy","color: #FFE66D; font-weight: bold;"),console.log("  ‚Üí Check PERF logs - are movement updates < 16ms?"),console.log("  ‚Üí Check DRAG MOVE logs - is validity check working correctly?"),console.log(""),console.log("%cExample 2: Placement is broken","color: #FFE66D; font-weight: bold;"),console.log("  ‚Üí Check PLACEMENT logs - is piece getting marked as VALID?"),console.log("  ‚Üí Check ERROR logs for rejection reasons"),console.log(""),console.log("%cExample 3: Score not updating","color: #FFE66D; font-weight: bold;"),console.log("  ‚Üí Check SCORE + logs - are points being added?"),console.log("  ‚Üí Check LINE CLEAR logs - are lines detected?"),console.log(""),console.log("%cExample 4: Game over too early","color: #FFE66D; font-weight: bold;"),console.log("  ‚Üí Check GRID STATE logs - when does move count hit 0?"),console.log("  ‚Üí Check PLACEMENT logs - which pieces failed?"),console.groupEnd(),console.log("%c‚úÖ Ready to play! Open DevTools (F12) to see real-time logs","color: #66BB6A; font-size: 12px; font-style: italic;"),console.log(""),console.log("%c‚è±Ô∏è TIP: For DETAILED performance metrics, type in console:","color: #95E1D3; font-weight: bold;"),console.log("  ‚Üí logger.logPerformanceGuide()"),console.log("")}document.addEventListener("DOMContentLoaded",()=>{ee(),X(),N(),_(),W();try{"serviceWorker"in navigator&&(async()=>{const d=["/BlokusFocus/sw.js","/sw.js"];for(const c of d)try{if(!(await fetch(c,{method:"HEAD",cache:"no-store"})).ok){console.debug("SW not found at",c);continue}const u=await navigator.serviceWorker.register(c);console.log("ServiceWorker registered with",c,"scope:",u.scope);break}catch{console.debug("SW registration attempt failed for",c)}})()}catch(d){console.warn("ServiceWorker registration error",d)}document.querySelector(".logo")&&(window.colorBurstEffect=new U);const l=document.querySelectorAll(".special-actions .action-btn");l.forEach(d=>{d.addEventListener("click",()=>{l.forEach(c=>c.classList.remove("active")),d.classList.add("active")})});const e=()=>document.body.classList.add("glass-ready");"requestIdleCallback"in window?requestIdleCallback(e,{timeout:1500}):setTimeout(e,1200);const t=document.getElementById("settingsModal"),o=document.getElementById("settingsButton"),n=t==null?void 0:t.querySelector(".settings-close"),s=document.getElementById("settingsTitle");function i(){t&&(t.style.display="flex",s&&setTimeout(()=>s.focus(),50),document.addEventListener("keydown",r))}function g(){t&&(t.style.display="none",document.removeEventListener("keydown",r),o&&o.focus())}function r(d){d.key==="Escape"&&g()}o==null||o.addEventListener("click",i),n==null||n.addEventListener("click",g)});export{O as _,te as i};
//# sourceMappingURL=index-CwA7slCi.js.map
