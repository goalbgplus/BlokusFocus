{"version":3,"mappings":"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","names":["tutorialPlayed","showTutorialModal","shouldRun","modalOverlay","modalHTML","closeModal","e","runTutorialAnimation","grid","scoreEl","pieceContainer","finger","initializeTutorialGrid","setupPrefilledRow","initializeTutorialPiece","startAnimationSequence","createTutorialBlock","colorTheme","block","theme","cells","cell","rowToFill","tealTheme","i","targetCellRect","pieceRect","deltaX","deltaY","index","resetTutorialAnimation","initLanding","animatePieceShowcase","classicShowcase","collectionShowcase","classicBlocks","collectionBlocks","colorPalettes","classicShapes","collectionShapes","classicIndex","collectionIndex","applyShape","blocks","shape","gatherPoint","showModal","type","content","specialActions","highScoreEl","piecesUnlockedEl","count","score","stat","target","current","increment","updateCount","howToPlayButton","contactButton","modeButtons","hasLoadedOnce","button","selectedMode","landingPage","gameContainer","initMain","err","existing","banner","iconContainer","DarkModeManager","gameToggle","landingToggle","newTheme","metaThemeColor","scoreGradient","gameIcon","iconClass","title","gameBtn","themeToggle","moonIcon","sunIcon","systemTheme","initDarkMode","darkModeManager","initGameBackground","generateStars","resizeTimeout","starsContainer","isMobile","starCount","star","top","left","maxSize","size","ColorBurstEffect","logo","event","clickNumber","clickIndicator","rect","centerX","centerY","x","y","ripple","wave","particleCount","particle","color","angle","distance","endX","endY","sparkleCount","sparkle","offsetX","offsetY","rand","audioContext","oscillator","gainNode","showSettingsModal","modal","soundCheckbox","musicCheckbox","vibrationCheckbox","ev","handleBackdropClick","modalContent","closeSettingsModal","html","modalBody","showHowToPlay","showContact","showAchievements","initializeSettings","soundEnabled","musicEnabled","vibrationEnabled","VERSION_COLORS","initVersionBadge","versionMeta","version","versionNumber","badge","hexToRgb","hex","result","printLoggingGuide","candidates","swPath","reg","specialBtns","btn","b","enableGlass","openBtn","closeBtn","openSettings","escClose","closeSettings"],"ignoreList":[],"sources":["../../js/tutorialAnimation.js","../../js/landing.js","../../js/darkMode.js","../../js/game-background.js","../../js/colorBurst.js","../../js/modalManager.js","../../js/app.js?v=3.0"],"sourcesContent":["// Tutorial Animation System for \"How to Play\" feature\r\n// This module handles all the logic for the tutorial modal and animation\r\n\r\nlet tutorialPlayed = false;\r\n\r\nexport function showTutorialModal() {\r\n    const shouldRun = !tutorialPlayed;\r\n    tutorialPlayed = true;\r\n    const modalOverlay = document.createElement('div');\r\n    modalOverlay.className = 'modal-overlay';\r\n    \r\n    const modalHTML = `\r\n        <div class=\"modal-content tutorial-modal\">\r\n            <h2>How to Play</h2>\r\n            <div class=\"tutorial-container\">\r\n                <div class=\"tutorial-score\" id=\"tutorial-score\">Score: 0</div>\r\n                <div class=\"tutorial-grid\" id=\"tutorial-grid\"></div>\r\n                <div class=\"tutorial-piece-area\">\r\n                    <div class=\"tutorial-piece\" id=\"tutorial-piece\">\r\n                        <div class=\"p-block\"></div><div class=\"p-block\"></div><div class=\"p-block\"></div><div class=\"p-block\"></div>\r\n                    </div>\r\n                    <div class=\"tutorial-finger\" id=\"tutorial-finger\"><i class=\"fa-solid fa-hand-pointer\"></i></div>\r\n                </div>\r\n            </div>\r\n            <button class=\"modal-close-btn\">Got it!</button>\r\n        </div>`;\r\n\r\n    modalOverlay.innerHTML = modalHTML;\r\n    document.body.appendChild(modalOverlay);\r\n    document.body.classList.add('no-scroll');  // Disable body scrolling\r\n    \r\n    // Close modal handlers\r\n    const closeModal = () => { \r\n        if (document.body.contains(modalOverlay)) { \r\n            document.body.removeChild(modalOverlay);\r\n            document.body.classList.remove('no-scroll'); // Re-enable scrolling\r\n        }\r\n    };\r\n    \r\n    modalOverlay.querySelector('.modal-close-btn').addEventListener('click', closeModal);\r\n    modalOverlay.addEventListener('click', (e) => { \r\n        if(e.target === modalOverlay) closeModal(); \r\n    });\r\n\r\n    // Start the animation only once\r\n    if (shouldRun) runTutorialAnimation();\r\n}\r\n\r\nfunction runTutorialAnimation() {\r\n    const grid = document.getElementById('tutorial-grid');\r\n    const scoreEl = document.getElementById('tutorial-score');\r\n    const pieceContainer = document.getElementById('tutorial-piece');\r\n    const finger = document.getElementById('tutorial-finger');\r\n    \r\n    if(!grid || !scoreEl || !pieceContainer || !finger) return;\r\n\r\n    // Initialize grid with 100 cells\r\n    initializeTutorialGrid(grid);\r\n    \r\n    // Create pre-filled row (missing 4 blocks in the middle)\r\n    setupPrefilledRow(grid);\r\n    \r\n    // Initialize the falling piece\r\n    initializeTutorialPiece(pieceContainer);\r\n    \r\n    // Start the animation sequence\r\n    startAnimationSequence(grid, scoreEl, pieceContainer, finger);\r\n}\r\n\r\nfunction createTutorialBlock(colorTheme) {\r\n    const block = document.createElement('div');\r\n    block.className = 'block';\r\n    \r\n    const defaultTheme = {\r\n        dark1: '#d64e1f', \r\n        dark2: '#a3320f',\r\n        coreLight: 'rgba(255, 187, 166, 0.8)',\r\n        coreMid: 'rgba(255, 137, 98, 0.5)',\r\n        bevelLight: 'rgba(255, 255, 255, 0.2)',\r\n        bevelDark: 'rgba(80, 24, 0, 0.4)',\r\n        highlight: 'rgba(230, 240, 255, 0.5)'\r\n    };\r\n    \r\n    const theme = colorTheme || defaultTheme;\r\n    \r\n    block.style.setProperty('--color-dark-1', theme.dark1);\r\n    block.style.setProperty('--color-dark-2', theme.dark2);\r\n    block.style.setProperty('--color-core-light', theme.coreLight);\r\n    block.style.setProperty('--color-core-mid', theme.coreMid);\r\n    block.style.setProperty('--color-bevel-light', theme.bevelLight);\r\n    block.style.setProperty('--color-bevel-dark', theme.bevelDark);\r\n    block.style.setProperty('--color-highlight', theme.highlight);\r\n    \r\n    return block;\r\n}\r\n\r\nfunction initializeTutorialGrid(grid) {\r\n    grid.innerHTML = '';\r\n    \r\n    // Create 100 cells (10x10 grid)\r\n    const cells = Array.from({ length: 100 }, () => {\r\n        const cell = document.createElement('div');\r\n        cell.classList.add('grid-cell');\r\n        grid.appendChild(cell);\r\n        return cell;\r\n    });\r\n    \r\n    // Store cells reference for later use\r\n    grid._cells = cells;\r\n}\r\n\r\nfunction setupPrefilledRow(grid) {\r\n    const cells = grid._cells;\r\n    const rowToFill = 5; // Row 6 (0-indexed)\r\n    \r\n    // Fill the row except for positions 3, 4, 5, 6 (where the piece will fit)\r\n    const tealTheme = {\r\n        dark1: '#14b8a6', \r\n        dark2: '#0f766e',\r\n        coreLight: 'rgba(166, 246, 237, 0.8)',\r\n        coreMid: 'rgba(109, 235, 224, 0.5)',\r\n        bevelLight: 'rgba(255, 255, 255, 0.2)',\r\n        bevelDark: 'rgba(0, 77, 70, 0.4)',\r\n        highlight: 'rgba(255, 255, 240, 0.5)'\r\n    };\r\n    \r\n    for(let i = 0; i < 10; i++) {\r\n        if (i < 3 || i > 6) { // Skip the middle 4 positions\r\n            cells[rowToFill * 10 + i].appendChild(createTutorialBlock(tealTheme));\r\n        }\r\n    }\r\n}\r\n\r\nfunction initializeTutorialPiece(pieceContainer) {\r\n    pieceContainer.innerHTML = '';\r\n    \r\n    // Create 4 blocks for the I-piece (tetromino)\r\n    for(let i = 0; i < 4; i++) {\r\n        const block = createTutorialBlock(); // Uses default orange theme\r\n        pieceContainer.appendChild(block);\r\n    }\r\n}\r\n\r\nfunction startAnimationSequence(grid, scoreEl, pieceContainer, finger) {\r\n    const cells = grid._cells;\r\n    \r\n    // Phase 1: Show finger (500ms)\r\n    setTimeout(() => { \r\n        finger.style.opacity = '1'; \r\n        finger.style.transform = 'translate(0, 0)'; \r\n    }, 500);\r\n    \r\n    // Phase 2: Scale down piece slightly (1500ms)\r\n    setTimeout(() => { \r\n        pieceContainer.style.transform = 'scale(0.9)'; \r\n    }, 1500);\r\n    \r\n    // Phase 3: Move piece and finger to target position (2000ms)\r\n    setTimeout(() => { \r\n        const targetCellRect = cells[53].getBoundingClientRect(); // Row 5, Column 3\r\n        const pieceRect = pieceContainer.getBoundingClientRect();\r\n\r\n        const deltaX = targetCellRect.left - pieceRect.left;\r\n        const deltaY = targetCellRect.top - pieceRect.top;\r\n        \r\n        finger.style.transform = `translate(${deltaX}px, ${deltaY}px)`; \r\n        pieceContainer.style.transform = `translate(${deltaX}px, ${deltaY}px)`;\r\n    }, 2000);\r\n\r\n    // Phase 4: Place piece and hide moving elements (3500ms)\r\n    setTimeout(() => {\r\n        pieceContainer.style.opacity = '0';\r\n        finger.style.opacity = '0';\r\n        \r\n        // Place blocks in the grid\r\n        const targetIndexes = [53, 54, 55, 56]; // 4 consecutive cells in row 5\r\n        targetIndexes.forEach(index => {\r\n           cells[index].appendChild(createTutorialBlock());\r\n        });\r\n    }, 3500);\r\n\r\n    // Phase 5: Clear the completed row (4200ms)\r\n    setTimeout(() => {\r\n        const rowToFill = 5;\r\n        for(let i = 0; i < 10; i++) {\r\n            const cell = cells[rowToFill * 10 + i];\r\n            const block = cell.querySelector('.block');\r\n            if (block) {\r\n                block.classList.add('clearing');\r\n            }\r\n        }\r\n    }, 4200);\r\n\r\n    // Phase 6: Update score (4700ms)\r\n    setTimeout(() => {\r\n        scoreEl.textContent = `Score: 100`;\r\n        scoreEl.classList.add('updated');\r\n    }, 4700);\r\n    \r\n    // Phase 7: Remove score animation (5000ms)\r\n    setTimeout(() => { \r\n        scoreEl.classList.remove('updated'); \r\n    }, 5000);\r\n    \r\n    // Phase 8: Reset for loop (6000ms)\r\n    setTimeout(() => {\r\n        resetTutorialAnimation(grid, scoreEl, pieceContainer, finger);\r\n    }, 6000);\r\n}\r\n\r\nfunction resetTutorialAnimation(grid, scoreEl, pieceContainer, finger) {\r\n    // Reset score\r\n    scoreEl.textContent = 'Score: 0';\r\n    scoreEl.classList.remove('updated');\r\n    \r\n    // Reset piece position and visibility\r\n    pieceContainer.style.transform = 'scale(1)';\r\n    pieceContainer.style.opacity = '1';\r\n    \r\n    // Reset finger\r\n    finger.style.opacity = '0';\r\n    finger.style.transform = 'translate(0, 50px)';\r\n    \r\n    // Clear and rebuild grid\r\n    initializeTutorialGrid(grid);\r\n    setupPrefilledRow(grid);\r\n    initializeTutorialPiece(pieceContainer);\r\n    \r\n    // Restart animation\r\n    setTimeout(() => {\r\n        startAnimationSequence(grid, scoreEl, pieceContainer, finger);\r\n    }, 1000);\r\n}\r\n\r\n// Export the main function for use in landing.js\r\nexport { createTutorialBlock };\r\n","// import updateLandingPageStats from main.js removed to enable lazy-loading of game code\r\nimport { showTutorialModal } from './tutorialAnimation.js';\r\n\r\n// Initialize landing page behaviors\r\nexport function initLanding() {\r\n    \r\n    // Animation and interaction logic from new design\r\n    function animatePieceShowcase() {\r\n        const step = 33.3; \r\n        const classicShowcase = document.querySelector('[data-mode=\"classic\"] .piece-showcase');\r\n        const collectionShowcase = document.querySelector('[data-mode=\"collection\"] .piece-showcase');\r\n        \r\n        if (!classicShowcase || !collectionShowcase) return;\r\n        \r\n        const classicBlocks = classicShowcase.querySelectorAll('.block');\r\n        const collectionBlocks = collectionShowcase.querySelectorAll('.block');\r\n        const colorPalettes = [\r\n            { dark1: '#2a7dcc', dark2: '#164d85', coreLight: 'rgba(168, 208, 255, 0.8)', coreMid: 'rgba(94, 174, 255, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(15, 52, 92, 0.4)', highlight: 'rgba(255, 235, 225, 0.5)' },\r\n            { dark1: '#d64e1f', dark2: '#a3320f', coreLight: 'rgba(255, 187, 166, 0.8)', coreMid: 'rgba(255, 137, 98, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(80, 24, 0, 0.4)', highlight: 'rgba(230, 240, 255, 0.5)' },\r\n            { dark1: '#34c759', dark2: '#1d8a3c', coreLight: 'rgba(170, 255, 195, 0.8)', coreMid: 'rgba(117, 255, 150, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(0, 74, 15, 0.4)', highlight: 'rgba(255, 255, 230, 0.5)' },\r\n            { dark1: '#705ce1', dark2: '#4d38ba', coreLight: 'rgba(213, 204, 255, 0.8)', coreMid: 'rgba(175, 159, 255, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(38, 23, 105, 0.4)', highlight: 'rgba(230, 255, 235, 0.5)' },\r\n            { dark1: '#cd5498', dark2: '#9e3670', coreLight: 'rgba(250, 187, 218, 0.8)', coreMid: 'rgba(246, 137, 195, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(77, 21, 52, 0.4)', highlight: 'rgba(230, 255, 235, 0.5)' },\r\n            { dark1: '#d4c22b', dark2: '#a0920c', coreLight: 'rgba(255, 255, 171, 0.8)', coreMid: 'rgba(255, 255, 122, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(77, 69, 0, 0.4)', highlight: 'rgba(235, 230, 255, 0.5)' }\r\n        ];\r\n        const classicShapes = [\r\n            { name: 'cross', coords: [ {t:0,l:step}, {t:step,l:0}, {t:step,l:step}, {t:step,l:step*2}, {t:step*2,l:step} ], colorIndex: 0 },\r\n            { name: 'ushape', coords: [ {t:0,l:0}, {t:step,l:0}, {t:step,l:step}, {t:step,l:step*2}, {t:0,l:step*2} ], colorIndex: 1 },\r\n            { name: 'fshape_new', coords: [ {t:step, l:0}, {t:0, l:step}, {t:step, l:step}, {t:step*2, l:step}, {t:step, l:step*2} ], colorIndex: 2 }\r\n        ];\r\n        const collectionShapes = [\r\n            { name: 'lshape', coords: [ {t:0,l:0}, {t:step,l:0}, {t:step*2,l:0}, {t:step*2,l:step} ], colorIndex: 3 },\r\n            { name: 'square', coords: [ {t:0,l:0}, {t:0,l:step}, {t:step,l:0}, {t:step,l:step} ], colorIndex: 4 },\r\n            { name: 'tshape', coords: [ {t:0,l:step}, {t:step,l:0}, {t:step,l:step}, {t:step,l:step*2} ], colorIndex: 5 }\r\n        ];\r\n        let classicIndex = 0; \r\n        let collectionIndex = 0;\r\n        \r\n        const applyShape = (blocks, shape) => {\r\n            const colorTheme = colorPalettes[shape.colorIndex];\r\n            const gatherPoint = { t: step, l: step };\r\n            blocks.forEach((block, i) => {\r\n                block.style.transitionDelay = `${i * 30}ms`; \r\n                if (block.style.opacity !== '0') {\r\n                   block.style.top = `${gatherPoint.t}%`;\r\n                   block.style.left = `${gatherPoint.l}%`;\r\n                }\r\n            });\r\n            setTimeout(() => {\r\n                blocks.forEach((block, i) => {\r\n                    block.style.transitionDelay = `${i * 60}ms`; \r\n                    block.style.setProperty('--color-dark-1', colorTheme.dark1);\r\n                    block.style.setProperty('--color-dark-2', colorTheme.dark2);\r\n                    block.style.setProperty('--color-core-light', colorTheme.coreLight);\r\n                    block.style.setProperty('--color-core-mid', colorTheme.coreMid);\r\n                    block.style.setProperty('--color-bevel-light', colorTheme.bevelLight);\r\n                    block.style.setProperty('--color-bevel-dark', colorTheme.bevelDark);\r\n                    block.style.setProperty('--color-highlight', colorTheme.highlight);\r\n                    if (shape.coords[i]) {\r\n                        block.style.opacity = '1';\r\n                        block.style.top = `${shape.coords[i].t}%`;\r\n                        block.style.left = `${shape.coords[i].l}%`;\r\n                    } else { \r\n                        block.style.opacity = '0'; \r\n                    }\r\n                });\r\n            }, 750);\r\n        };\r\n        \r\n        applyShape(classicBlocks, classicShapes[0]);\r\n        applyShape(collectionBlocks, collectionShapes[0]);\r\n        \r\n        setInterval(() => {\r\n            classicIndex = (classicIndex + 1) % classicShapes.length;\r\n            applyShape(classicBlocks, classicShapes[classicIndex]);\r\n        }, 2500);\r\n        setInterval(() => {\r\n            collectionIndex = (collectionIndex + 1) % collectionShapes.length;\r\n            applyShape(collectionBlocks, collectionShapes[collectionIndex]);\r\n        }, 2500);\r\n    }\r\n\r\n    function showModal(type, content) {\r\n        if (type === 'tutorial') {\r\n            showTutorialModal();\r\n            return;\r\n        }\r\n        \r\n        // Handle other modal types (like contact)\r\n        const modalOverlay = document.createElement('div');\r\n        modalOverlay.className = 'modal-overlay';\r\n        const modalHTML = `<div class=\"modal-content\"><h2>${type}</h2><p>${content}</p><button class=\"modal-close-btn\">Close</button></div>`;\r\n        modalOverlay.innerHTML = modalHTML;\r\n        document.body.appendChild(modalOverlay);\r\n        \r\n        const closeModal = () => { if (document.body.contains(modalOverlay)) { document.body.removeChild(modalOverlay); }};\r\n        modalOverlay.querySelector('.modal-close-btn').addEventListener('click', closeModal);\r\n        modalOverlay.addEventListener('click', (e) => { if(e.target === modalOverlay) closeModal(); });\r\n    }\r\n\r\n    \r\n    // Hide special-actions until game starts\r\n    const specialActions = document.querySelector('.special-actions');\r\n    if (specialActions) specialActions.classList.add('hidden');\r\n    // Initialize animations and stats\r\n    animatePieceShowcase();\r\n    // Inline stats update to avoid loading main.js\r\n    (function updateLandingPageStatsInline() {\r\n        const highScoreEl = document.getElementById('highscore-display');\r\n        if (highScoreEl) {\r\n            highScoreEl.textContent = localStorage.getItem('blokusHighScore') || '0';\r\n        }\r\n        const piecesUnlockedEl = document.getElementById('pieces-unlocked');\r\n        if (piecesUnlockedEl) {\r\n            let count = 7;\r\n            const score = parseInt(localStorage.getItem('blokusHighScore') || '0');\r\n            if (score >= 2000) count += 6;\r\n            if (score >= 4000) count += 6;\r\n            if (score >= 6000) count += 6;\r\n            if (score >= 8000) count += 5;\r\n            piecesUnlockedEl.textContent = Math.min(count, 30);\r\n        }\r\n    })();\r\n\r\n    // Animate stats counters\r\n    const stats = document.querySelectorAll('.stat-value');\r\n    stats.forEach(stat => {\r\n        const target = +stat.getAttribute('data-target') || parseInt(stat.textContent);\r\n        let current = 0;\r\n        const increment = target / 100;\r\n        const updateCount = () => {\r\n            if (current < target) {\r\n                current += increment;\r\n                stat.innerText = Math.ceil(current);\r\n                requestAnimationFrame(updateCount);\r\n            } else {\r\n                stat.innerText = target;\r\n            }\r\n        };\r\n        setTimeout(() => {\r\n            updateCount();\r\n        }, 500); \r\n    });\r\n    \r\n    // Button event handlers\r\n    const howToPlayButton = document.getElementById('how-to-play-btn');\r\n    if (howToPlayButton) {\r\n        howToPlayButton.addEventListener('click', () => { \r\n            showModal('tutorial'); \r\n        });\r\n    }\r\n\r\n    const contactButton = document.getElementById('contact-btn');\r\n    if (contactButton) {\r\n        contactButton.addEventListener('click', () => { \r\n            showModal('Contact', 'For any questions, contact us at: contact@blokusblast.com'); \r\n        });\r\n    }\r\n    \r\n    // Mode selection with loading animation and game start\r\n    const modeButtons = document.querySelectorAll('.mode-button.selectable');\r\n    let hasLoadedOnce = false;\r\n    modeButtons.forEach(button => {\r\n        button.addEventListener('click', function() {\r\n            const selectedMode = this.dataset.mode;\r\n            localStorage.setItem('selectedGameMode', selectedMode);\r\n            const landingPage = document.getElementById('landingPage');\r\n            const gameContainer = document.querySelector('.game-container');\r\n            if (!hasLoadedOnce) {\r\n                // Lazy-load game code modules\r\n                import('./main.js').then(({ initMain }) => {\r\n                    initMain();\r\n                }).catch(err => {\r\n                    console.error('Lazy import failed:', err);\r\n                    // Show a visible banner with the error so it's obvious on phones\r\n                    try {\r\n                        const existing = document.getElementById('clientImportErrorBanner');\r\n                        if (existing) existing.remove();\r\n                        const banner = document.createElement('div');\r\n                        banner.id = 'clientImportErrorBanner';\r\n                        banner.style.position = 'fixed';\r\n                        banner.style.left = '12px';\r\n                        banner.style.right = '12px';\r\n                        banner.style.bottom = '24px';\r\n                        banner.style.zIndex = '99999';\r\n                        banner.style.background = 'linear-gradient(90deg,#ff6b6b,#ff4757)';\r\n                        banner.style.color = '#fff';\r\n                        banner.style.padding = '12px 16px';\r\n                        banner.style.borderRadius = '8px';\r\n                        banner.style.boxShadow = '0 6px 20px rgba(0,0,0,0.4)';\r\n                        banner.style.fontSize = '14px';\r\n                        banner.style.lineHeight = '1.2';\r\n                        banner.textContent = 'Error loading game: ' + (err && err.message ? err.message : String(err));\r\n                        document.body.appendChild(banner);\r\n                    } catch (e) {\r\n                        // swallow errors while reporting\r\n                    }\r\n                });\r\n                // Vetëm spinner në buton, pa modal\r\n                const iconContainer = this.querySelector('.icon');\r\n                if (iconContainer) {\r\n                    iconContainer.innerHTML = `<i class=\"fa-solid fa-spinner fa-spin\" style=\"font-size: 2.5rem;\"></i>`;\r\n                }\r\n                setTimeout(() => {\r\n                    if (landingPage && gameContainer) {\r\n                        landingPage.classList.add('hidden');\r\n                        document.body.classList.remove('landing-page');\r\n                        gameContainer.classList.remove('hidden');\r\n                        window.selectedGameMode = selectedMode;\r\n                        // Show special-actions container\r\n                        const specialActions = document.querySelector('.special-actions');\r\n                        if (specialActions) specialActions.classList.remove('hidden');\r\n                        if (typeof window.initializeGame === 'function') {\r\n                            window.initializeGame();\r\n                        }\r\n                    }\r\n                    hasLoadedOnce = true;\r\n                }, 1500);\r\n            } else {\r\n                // Fut direkt në lojë pa animacion\r\n                if (landingPage && gameContainer) {\r\n                    landingPage.classList.add('hidden');\r\n                    gameContainer.classList.remove('hidden');\r\n                    window.selectedGameMode = selectedMode;\r\n                        // Show special-actions container\r\n                        const specialActions = document.querySelector('.special-actions');\r\n                        if (specialActions) specialActions.classList.remove('hidden');\r\n                    if (typeof window.initializeGame === 'function') {\r\n                        window.initializeGame();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n} // end initLanding\r\n","// Dark Mode Management System\r\nclass DarkModeManager {\r\n    constructor() {\r\n        this.currentTheme = localStorage.getItem('blokus-theme') || 'default';\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        // Apply saved theme on load\r\n        this.applyTheme(this.currentTheme);\r\n        \r\n        // Initialize toggle buttons\r\n        this.initToggleButtons();\r\n        \r\n        // Update UI icons\r\n        this.updateIcons();\r\n    }\r\n\r\n    initToggleButtons() {\r\n        // Game page toggle\r\n        const gameToggle = document.getElementById('darkModeToggleGame');\r\n        if (gameToggle) {\r\n            gameToggle.addEventListener('click', () => this.toggleTheme());\r\n        }\r\n\r\n    // Landing page toggle (actual ID in template)\r\n    const landingToggle = document.getElementById('theme-toggle');\r\n        if (landingToggle) {\r\n            landingToggle.addEventListener('click', () => this.toggleTheme());\r\n        }\r\n    }\r\n\r\n    toggleTheme() {\r\n        const newTheme = this.currentTheme === 'dark' ? 'default' : 'dark';\r\n        this.setTheme(newTheme);\r\n    }\r\n\r\n    setTheme(theme) {\r\n        this.currentTheme = theme;\r\n        this.applyTheme(theme);\r\n        this.saveTheme(theme);\r\n        this.updateIcons();\r\n        \r\n        // Dispatch custom event for other components\r\n        window.dispatchEvent(new CustomEvent('themeChanged', { \r\n            detail: { theme: theme } \r\n        }));\r\n    }\r\n\r\n    applyTheme(theme) {\r\n    document.body.setAttribute('data-theme', theme);\r\n    // Get reference to game container for background styling\r\n    const gameContainer = document.querySelector('.game-container');\r\n        // Always apply dark mode background on the game container\r\n        // Body background remains skipped on landing page\r\n        if (theme === 'dark') {\r\n            // Body gradient (only effective after landing page)\r\n            if (!document.body.classList.contains('landing-page')) {\r\n                const bodyGradient = 'linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #16213e 75%, #1a1a2e 100%)';\r\n                document.body.style.setProperty('background', bodyGradient, 'important');\r\n                document.body.style.setProperty('background-size', '400% 400%', 'important');\r\n                document.body.style.setProperty('animation', 'dark-gradient-animation 30s ease infinite', 'important');\r\n            }\r\n            // Game container always styled\r\n            if (gameContainer) {\r\n                gameContainer.style.setProperty('background', `\r\n                        radial-gradient(circle at 15% 20%, rgba(135, 206, 235, 0.3) 0%, transparent 45%),\r\n                        radial-gradient(circle at 80% 70%, rgba(100, 149, 237, 0.4) 0%, transparent 45%),\r\n                        radial-gradient(circle at 40% 85%, rgba(72, 61, 139, 0.4) 0%, transparent 45%),\r\n                        radial-gradient(circle at 65% 25%, rgba(25, 25, 112, 0.5) 0%, transparent 45%),\r\n                        linear-gradient(135deg, #1a1a2e, #16213e, #0f3460, #16213e)\r\n                    `, 'important');\r\n            }\r\n        } else {\r\n            // Remove body dark gradient\r\n            document.body.style.removeProperty('background');\r\n            document.body.style.removeProperty('background-size');\r\n            document.body.style.removeProperty('animation');\r\n            // Always clear game container background\r\n            if (gameContainer) {\r\n                gameContainer.style.removeProperty('background');\r\n            }\r\n        }\r\n        // Force style recalculation\r\n        document.body.offsetHeight;\r\n        \r\n        // Update meta theme-color for mobile browsers\r\n        const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\r\n        if (metaThemeColor) {\r\n            metaThemeColor.content = theme === 'dark' ? '#1a1a2e' : '#667eea';\r\n        }\r\n\r\n    // Also set CSS-level fallback for score gradient so JS-triggered theme changes reflect immediately\r\n    let scoreGradient;\r\n    if (theme === 'dark') scoreGradient = 'linear-gradient(135deg, #FFD700 0%, #FBBF24 50%, #FFA500 100%)';\r\n    else if (theme === 'forest') scoreGradient = 'linear-gradient(135deg, #34d399 0%, #16a34a 100%)';\r\n    else scoreGradient = 'linear-gradient(135deg, #34d399 0%, #10b981 50%, #059669 100%)';\r\n    document.body.style.setProperty('--score-gradient', scoreGradient, 'important');\r\n    // Ghost color variables (theme aware)\r\n    if (theme === 'dark') {\r\n        document.body.style.setProperty('--ghost-border-color', 'rgba(86,176,255,0.95)', 'important');\r\n        document.body.style.setProperty('--ghost-glow-color', 'rgba(86,176,255,0.55)', 'important');\r\n        document.body.style.setProperty('--ghost-fill-color', 'rgba(86,176,255,0.12)', 'important');\r\n    } else if (theme === 'forest') {\r\n        document.body.style.setProperty('--ghost-border-color', 'rgba(34,197,94,0.95)', 'important');\r\n        document.body.style.setProperty('--ghost-glow-color', 'rgba(34,197,94,0.5)', 'important');\r\n        document.body.style.setProperty('--ghost-fill-color', 'rgba(34,197,94,0.12)', 'important');\r\n    } else {\r\n        // Default / light theme: restore original yellow ghost outline\r\n        document.body.style.setProperty('--ghost-border-color', 'rgba(255,229,59,0.95)', 'important');\r\n        document.body.style.setProperty('--ghost-glow-color', 'rgba(255,229,59,0.55)', 'important');\r\n        document.body.style.setProperty('--ghost-fill-color', 'rgba(255,229,59,0.12)', 'important');\r\n    }\r\n    }\r\n\r\n    updateIcons() {\r\n    const gameIcon = document.getElementById('darkModeIconGame');\r\n    const iconClass = this.currentTheme === 'dark' ? 'fa-sun' : 'fa-moon';\r\n    const title = this.currentTheme === 'dark' ? 'Switch to Light Mode' : 'Switch to Dark Mode';\r\n        // Update game page icon\r\n        if (gameIcon) {\r\n            gameIcon.className = `fas ${iconClass}`;\r\n            const gameBtn = gameIcon.parentElement;\r\n            if (gameBtn) {\r\n                gameBtn.setAttribute('title', title);\r\n                gameBtn.setAttribute('aria-label', title);\r\n                gameBtn.setAttribute('aria-pressed', this.currentTheme === 'dark' ? 'true' : 'false');\r\n            }\r\n        }\r\n        // Update landing page toggle icons\r\n        const themeToggle = document.getElementById('theme-toggle');\r\n        if (themeToggle) {\r\n            const moonIcon = themeToggle.querySelector('.icon-moon');\r\n            const sunIcon = themeToggle.querySelector('.icon-sun');\r\n            if (moonIcon && sunIcon) {\r\n                if (this.currentTheme === 'dark') {\r\n                    moonIcon.style.display = 'none';\r\n                    sunIcon.style.display = 'block';\r\n                } else {\r\n                    moonIcon.style.display = 'block';\r\n                    sunIcon.style.display = 'none';\r\n                }\r\n                themeToggle.setAttribute('title', title);\r\n                themeToggle.setAttribute('aria-label', title);\r\n                themeToggle.setAttribute('aria-pressed', this.currentTheme === 'dark' ? 'true' : 'false');\r\n            }\r\n        }\r\n    }\r\n\r\n    saveTheme(theme) {\r\n        localStorage.setItem('blokus-theme', theme);\r\n    }\r\n\r\n    getCurrentTheme() {\r\n        return this.currentTheme;\r\n    }\r\n\r\n    // System theme detection (optional)\r\n    detectSystemTheme() {\r\n        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\r\n            return 'dark';\r\n        }\r\n        return 'default';\r\n    }\r\n\r\n    // Auto-switch based on system preference (optional)\r\n    enableAutoSwitch() {\r\n        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n        mediaQuery.addEventListener('change', (e) => {\r\n            const systemTheme = e.matches ? 'dark' : 'default';\r\n            this.setTheme(systemTheme);\r\n        });\r\n    }\r\n}\r\n\r\n// Initialize Dark Mode Manager\r\n// Initialize Dark Mode on demand\r\nexport function initDarkMode() {\r\n    const darkModeManager = new DarkModeManager();\r\n    // Make it globally accessible for debugging\r\n    window.darkModeManager = darkModeManager;\r\n}\r\n\r\n// Also export DarkModeManager class if needed\r\nexport default DarkModeManager;\r\n","// Generate stars for game background\r\n// Initialize game background effects\r\nexport function initGameBackground() {\r\n    // Generate initial stars\r\n    generateStars();\r\n    // Regenerate stars on resize for responsiveness\r\n    let resizeTimeout;\r\n    window.addEventListener('resize', function() {\r\n        clearTimeout(resizeTimeout);\r\n        resizeTimeout = setTimeout(generateStars, 300);\r\n    });\r\n}\r\n\r\nfunction generateStars() {\r\n    // Clear existing stars\r\n    const starsContainer = document.getElementById('gameStars');\r\n    \r\n    if (starsContainer) {\r\n        starsContainer.innerHTML = '';\r\n        \r\n        // Responsive star count\r\n        const isMobile = window.innerWidth <= 768;\r\n        const starCount = isMobile ? 80 : 200;\r\n        \r\n        for (let i = 0; i < starCount; i++) {\r\n            const star = document.createElement('div');\r\n            star.classList.add('star');\r\n            \r\n            // Random position\r\n            const top = Math.random() * 100;\r\n            const left = Math.random() * 100;\r\n            \r\n            star.style.top = `${top}%`;\r\n            star.style.left = `${left}%`;\r\n            \r\n            // Random size - smaller for mobile\r\n            const maxSize = isMobile ? 3 : 5;\r\n            const size = Math.random() * maxSize;\r\n            star.style.width = `${size}px`;\r\n            star.style.height = `${size}px`;\r\n            \r\n            // Random animation delay\r\n            star.style.animationDelay = `${Math.random() * 5}s`;\r\n            \r\n            starsContainer.appendChild(star);\r\n        }\r\n    }\r\n}","// Color Burst Effect System\r\nexport class ColorBurstEffect {\r\n    constructor() {\r\n        this.isActive = false;\r\n        this.particles = [];\r\n        this.clickCount = 0;\r\n        this.requiredClicks = 3;\r\n        this.clickTimeout = null;\r\n        this.colors = [\r\n            '#ff0096', // Hot pink\r\n            '#ff6900', // Orange  \r\n            '#ffd700', // Gold\r\n            '#00bfff', // Deep sky blue\r\n            '#8a2be2', // Blue violet\r\n            '#32cd32', // Lime green\r\n            '#ff4500', // Orange red\r\n            '#ff1493', // Deep pink\r\n            '#00ced1', // Dark turquoise\r\n            '#ff69b4'  // Hot pink\r\n        ];\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        // Create color burst container\r\n        this.container = document.createElement('div');\r\n        this.container.className = 'color-burst-container';\r\n        document.body.appendChild(this.container);\r\n\r\n        // Add click event to logo\r\n        const logo = document.querySelector('.logo');\r\n        if (logo) {\r\n            logo.addEventListener('click', (e) => this.handleLogoClick(e));\r\n            \r\n            // Add visual hint\r\n            logo.style.cursor = 'pointer';\r\n            logo.setAttribute('title', 'Blokus – Triple Click for Color Burst! 🎨 (0/3)');\r\n        }\r\n    }\r\n\r\n    handleLogoClick(event) {\r\n        if (this.isActive) return;\r\n        \r\n        this.clickCount++;\r\n        const logo = event.target.closest('.logo');\r\n        \r\n        // Clear previous timeout\r\n        if (this.clickTimeout) {\r\n            clearTimeout(this.clickTimeout);\r\n        }\r\n        \r\n        // Update title to show progress\r\n        logo.setAttribute('title', `Blokus – Triple Click for Color Burst! 🎨 (${this.clickCount}/3)`);\r\n        \r\n        // Add visual feedback for each click\r\n        this.addClickFeedback(logo, this.clickCount);\r\n        \r\n        if (this.clickCount >= this.requiredClicks) {\r\n            // Trigger the color burst!\r\n            logo.setAttribute('title', 'Blokus – Color Burst Activated! ✨');\r\n            this.triggerColorBurst(event);\r\n            this.resetClickCount();\r\n        } else {\r\n            // Reset click count after 2 seconds if not completed\r\n            this.clickTimeout = setTimeout(() => {\r\n                this.resetClickCount();\r\n                logo.setAttribute('title', 'Blokus – Triple Click for Color Burst! 🎨 (0/3)');\r\n            }, 2000);\r\n        }\r\n    }\r\n    \r\n    resetClickCount() {\r\n        this.clickCount = 0;\r\n        if (this.clickTimeout) {\r\n            clearTimeout(this.clickTimeout);\r\n            this.clickTimeout = null;\r\n        }\r\n    }\r\n    \r\n    addClickFeedback(logo, clickNumber) {\r\n        // Add a subtle bounce effect for each click\r\n        logo.style.transform = `scale(${1 + (clickNumber * 0.05)})`;\r\n        logo.style.filter = `drop-shadow(0 0 ${clickNumber * 5}px rgba(255, 229, 59, ${clickNumber * 0.3}))`;\r\n        \r\n        // Reset transform after animation\r\n        setTimeout(() => {\r\n            logo.style.transform = '';\r\n            logo.style.filter = '';\r\n        }, 200);\r\n        \r\n        // Create small click indicator\r\n        const clickIndicator = document.createElement('div');\r\n        clickIndicator.textContent = clickNumber;\r\n        clickIndicator.style.cssText = `\r\n            position: absolute;\r\n            top: -30px;\r\n            right: -10px;\r\n            background: #ff0096;\r\n            color: white;\r\n            border-radius: 50%;\r\n            width: 20px;\r\n            height: 20px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            font-size: 12px;\r\n            font-weight: bold;\r\n            animation: click-bounce 0.5s ease-out;\r\n            pointer-events: none;\r\n            z-index: 1000;\r\n        `;\r\n        \r\n        logo.style.position = 'relative';\r\n        logo.appendChild(clickIndicator);\r\n        \r\n        // Remove indicator after animation\r\n        setTimeout(() => clickIndicator.remove(), 500);\r\n    }\r\n\r\n    triggerColorBurst(event) {\r\n        if (this.isActive) return;\r\n        \r\n        this.isActive = true;\r\n        const logo = event.target.closest('.logo');\r\n        const rect = logo.getBoundingClientRect();\r\n        const centerX = rect.left + rect.width / 2;\r\n        const centerY = rect.top + rect.height / 2;\r\n\r\n        // Logo flash effect\r\n        logo.classList.add('color-burst-active');\r\n        setTimeout(() => logo.classList.remove('color-burst-active'), 800);\r\n\r\n        // Create ripple effect\r\n        this.createRipple(centerX, centerY);\r\n\r\n        // Create rainbow wave\r\n        this.createRainbowWave();\r\n\r\n        // Create particle explosion\r\n        this.createParticleExplosion(centerX, centerY);\r\n\r\n        // Create sparkle trails\r\n        this.createSparkleTrails(centerX, centerY);\r\n\r\n        // Play sound if available\r\n        this.playSound();\r\n\r\n        // Reset after animation\r\n        setTimeout(() => {\r\n            this.cleanup();\r\n            this.isActive = false;\r\n        }, 2500);\r\n    }\r\n\r\n    createRipple(x, y) {\r\n        for (let i = 0; i < 3; i++) {\r\n            setTimeout(() => {\r\n                const ripple = document.createElement('div');\r\n                ripple.className = 'color-burst-ripple';\r\n                ripple.style.left = `${x}px`;\r\n                ripple.style.top = `${y}px`;\r\n                ripple.style.transform = 'translate(-50%, -50%)';\r\n                this.container.appendChild(ripple);\r\n\r\n                setTimeout(() => ripple.remove(), 1500);\r\n            }, i * 200);\r\n        }\r\n    }\r\n\r\n    createRainbowWave() {\r\n        const wave = document.createElement('div');\r\n        wave.className = 'rainbow-wave';\r\n        document.body.appendChild(wave);\r\n\r\n        setTimeout(() => wave.remove(), 1500);\r\n    }\r\n\r\n    createParticleExplosion(centerX, centerY) {\r\n        const particleCount = window.innerWidth <= 768 ? 25 : 40;\r\n        \r\n        for (let i = 0; i < particleCount; i++) {\r\n            setTimeout(() => {\r\n                const particle = document.createElement('div');\r\n                particle.className = `color-burst-particle ${this.getRandomSize()}`;\r\n                \r\n                // Random color\r\n                const color = this.colors[Math.floor(Math.random() * this.colors.length)];\r\n                particle.style.background = `radial-gradient(circle, ${color}, ${color}88)`;\r\n                particle.style.boxShadow = `0 0 10px ${color}`;\r\n                \r\n                // Position at logo center\r\n                particle.style.left = `${centerX}px`;\r\n                particle.style.top = `${centerY}px`;\r\n                particle.style.transform = 'translate(-50%, -50%)';\r\n                \r\n                // Random direction and distance\r\n                const angle = (Math.PI * 2 * i) / particleCount + Math.random() * 0.5;\r\n                const distance = 100 + Math.random() * 200;\r\n                const endX = centerX + Math.cos(angle) * distance;\r\n                const endY = centerY + Math.sin(angle) * distance;\r\n                \r\n                // Animate to end position\r\n                particle.style.setProperty('--end-x', `${endX - centerX}px`);\r\n                particle.style.setProperty('--end-y', `${endY - centerY}px`);\r\n                \r\n                // Custom animation\r\n                particle.style.animation = `color-burst-explosion 2s ease-out forwards`;\r\n                particle.style.animationDelay = `${Math.random() * 0.3}s`;\r\n                \r\n                this.container.appendChild(particle);\r\n                this.particles.push(particle);\r\n\r\n                setTimeout(() => {\r\n                    particle.remove();\r\n                    const index = this.particles.indexOf(particle);\r\n                    if (index > -1) this.particles.splice(index, 1);\r\n                }, 2000);\r\n            }, i * 20);\r\n        }\r\n    }\r\n\r\n    createSparkleTrails(centerX, centerY) {\r\n        const sparkleCount = window.innerWidth <= 768 ? 15 : 25;\r\n        \r\n        for (let i = 0; i < sparkleCount; i++) {\r\n            setTimeout(() => {\r\n                const sparkle = document.createElement('div');\r\n                sparkle.className = 'color-burst-sparkle';\r\n                \r\n                const color = this.colors[Math.floor(Math.random() * this.colors.length)];\r\n                sparkle.style.color = color;\r\n                \r\n                // Random position around logo\r\n                const offsetX = (Math.random() - 0.5) * 400;\r\n                const offsetY = (Math.random() - 0.5) * 400;\r\n                sparkle.style.left = `${centerX + offsetX}px`;\r\n                sparkle.style.top = `${centerY + offsetY}px`;\r\n                sparkle.style.transform = 'translate(-50%, -50%)';\r\n                \r\n                this.container.appendChild(sparkle);\r\n\r\n                setTimeout(() => sparkle.remove(), 1200);\r\n            }, Math.random() * 800);\r\n        }\r\n    }\r\n\r\n    getRandomSize() {\r\n        const rand = Math.random();\r\n        if (rand < 0.3) return 'small';\r\n        if (rand < 0.7) return 'medium';\r\n        return 'large';\r\n    }\r\n\r\n    playSound() {\r\n        // Create a simple audio context for a satisfying \"pop\" sound\r\n        try {\r\n            const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n            const oscillator = audioContext.createOscillator();\r\n            const gainNode = audioContext.createGain();\r\n            \r\n            oscillator.connect(gainNode);\r\n            gainNode.connect(audioContext.destination);\r\n            \r\n            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\r\n            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.1);\r\n            \r\n            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);\r\n            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);\r\n            \r\n            oscillator.start(audioContext.currentTime);\r\n            oscillator.stop(audioContext.currentTime + 0.1);\r\n        } catch (e) {\r\n            // Audio not supported, that's okay\r\n        }\r\n    }\r\n\r\n    cleanup() {\r\n        // Remove any remaining particles\r\n        this.particles.forEach(particle => particle.remove());\r\n        this.particles = [];\r\n        \r\n        // Clean up container\r\n        while (this.container.firstChild) {\r\n            this.container.removeChild(this.container.firstChild);\r\n        }\r\n    }\r\n\r\n    // Public method to trigger effect programmatically\r\n    trigger() {\r\n        const logo = document.querySelector('.logo');\r\n        if (logo) {\r\n            this.triggerColorBurst({ target: logo });\r\n        }\r\n    }\r\n}\r\n// Named export of ColorBurstEffect\r\n","// Modal Manager\r\n\r\n// Settings modal\r\nexport function showSettingsModal(e) {\r\n    const modal = document.getElementById('settingsModal');\r\n    if (!modal) {\r\n        return;\r\n    }\r\n\r\n    modal.style.display = 'flex';\r\n\r\n    // Attach event listeners to setting checkboxes\r\n    const soundCheckbox = document.getElementById('toggleSound');\r\n    const musicCheckbox = document.getElementById('toggleMusic');\r\n    const vibrationCheckbox = document.getElementById('toggleVibration');\r\n\r\n    if (soundCheckbox) {\r\n        soundCheckbox.addEventListener('change', (ev) => {\r\n            localStorage.setItem('soundEnabled', ev.target.checked);\r\n        });\r\n    }\r\n\r\n    if (musicCheckbox) {\r\n        musicCheckbox.addEventListener('change', (ev) => {\r\n            localStorage.setItem('musicEnabled', ev.target.checked);\r\n        });\r\n    }\r\n\r\n    if (vibrationCheckbox) {\r\n        vibrationCheckbox.addEventListener('change', (ev) => {\r\n            localStorage.setItem('vibrationEnabled', ev.target.checked);\r\n            // Test vibration\r\n            if (ev.target.checked && window.navigator && window.navigator.vibrate) {\r\n                window.navigator.vibrate(100);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Close modal when clicking outside the content area\r\n    const handleBackdropClick = (ev) => {\r\n        // Only close if click is directly on modal (backdrop), not on content\r\n        const modalContent = modal.querySelector('.settings-modal-content');\r\n        if (modalContent && modalContent.contains(ev.target)) {\r\n            return;\r\n        }\r\n        \r\n        closeSettingsModal();\r\n    };\r\n\r\n    // Remove any old handler first\r\n    if (modal._backdropHandler) {\r\n        modal.removeEventListener('click', modal._backdropHandler);\r\n    }\r\n\r\n    modal._backdropHandler = handleBackdropClick;\r\n    modal.addEventListener('click', handleBackdropClick);\r\n}\r\n\r\nexport function closeSettingsModal() {\r\n    const modal = document.getElementById('settingsModal');\r\n    if (!modal) {\r\n        return;\r\n    }\r\n\r\n    modal.style.display = 'none';\r\n\r\n    // Remove backdrop click handler\r\n    if (modal._backdropHandler) {\r\n        modal.removeEventListener('click', modal._backdropHandler);\r\n        modal._backdropHandler = null;\r\n    }\r\n}\r\n\r\n// Generic content modal\r\nexport function showModal(html) {\r\n    const modal = document.getElementById('modal');\r\n    const modalBody = document.getElementById('modal-body');\r\n    if (modal && modalBody) {\r\n        modal.style.display = 'flex';\r\n        modalBody.innerHTML = html;\r\n    }\r\n}\r\n\r\nexport function closeModal() {\r\n    const modal = document.getElementById('modal');\r\n    if (modal) {\r\n        modal.style.display = 'none';\r\n    }\r\n}\r\n\r\n// Predefined content modals\r\nexport function showHowToPlay() {\r\n    showModal(\r\n        \"<h2>How to Play</h2><p>Place blocks to fill lines and score points. <br> Use strategy to avoid blocking yourself! <br> <b>Classic:</b> Pure points. <br><b>Collection:</b> Unlock new shapes. <br>Can you beat your high score?</p>\"\r\n    );\r\n}\r\n\r\nexport function showContact() {\r\n    showModal(\r\n        \"<h2>Contact</h2><p>For any questions or feedback, please email:<br><b><a href='mailto:info@blokusblast.com'>info@blokusblast.com</a></b></p>\"\r\n    );\r\n}\r\n\r\nexport function showAchievements() {\r\n    showModal(\r\n        \"<h2>Achievements</h2><ul style='text-align:left;padding-left:0;list-style:none;'><li>🏆 High Score: <b>3,400</b></li><li>🔓 All Pieces Unlocked!</li><li>🔥 10x Streak Bonus</li><li>💎 Discovered Secret Mode</li></ul>\"\r\n    );\r\n}\r\n// Close with Escape key\r\ndocument.addEventListener('keydown', e => {\r\n    if (e.key === 'Escape') closeModal();\r\n});\r\n\r\n// Initialize settings from localStorage\r\nexport function initializeSettings() {\r\n    const soundCheckbox = document.getElementById('toggleSound');\r\n    const musicCheckbox = document.getElementById('toggleMusic');\r\n    const vibrationCheckbox = document.getElementById('toggleVibration');\r\n\r\n    // Load from localStorage or default to true\r\n    if (soundCheckbox) {\r\n        const soundEnabled = localStorage.getItem('soundEnabled') !== 'false';\r\n        soundCheckbox.checked = soundEnabled;\r\n    }\r\n\r\n    if (musicCheckbox) {\r\n        const musicEnabled = localStorage.getItem('musicEnabled') !== 'false';\r\n        musicCheckbox.checked = musicEnabled;\r\n    }\r\n\r\n    if (vibrationCheckbox) {\r\n        const vibrationEnabled = localStorage.getItem('vibrationEnabled') !== 'false';\r\n        vibrationCheckbox.checked = vibrationEnabled;\r\n    }\r\n}\r\n\r\n// Expose to global scope for inline handlers\r\nwindow.showSettingsModal = showSettingsModal;\r\nwindow.closeSettingsModal = closeSettingsModal;\r\nwindow.showModal = showModal;\r\nwindow.closeModal = closeModal;\r\nwindow.showHowToPlay = showHowToPlay;\r\nwindow.showContact = showContact;\r\nwindow.showAchievements = showAchievements;\r\n","// Application bootstrap\r\n\r\n// COLOR SCHEME FOR VERSION BADGE\r\n// Each version gets a new color to track refreshes\r\nconst VERSION_COLORS = {\r\n    'v2.3': '#ff0000',  // Red\r\n    'v2.4': '#ff7700',  // Orange\r\n    'v2.5': '#ffdd00',  // Yellow\r\n    'v2.6': '#00ff00',  // Green\r\n    'v2.7': '#0088ff',  // Blue\r\n    'v2.8': '#aa00ff',  // Purple\r\n    'v2.9': '#ff00ff',  // Magenta\r\n    'v3.0': '#00ffff',  // Cyan\r\n    'v3.1': '#ff0088',  // Pink\r\n};\r\n\r\n// Initialize version badge with color\r\nfunction initVersionBadge() {\r\n    const versionMeta = document.querySelector('meta[name=\"app-version\"]');\r\n    const version = versionMeta?.getAttribute('content') || 'v0';\r\n    \r\n    const versionNumber = document.getElementById('versionNumber');\r\n    if (versionNumber) {\r\n        versionNumber.textContent = version;\r\n    }\r\n    \r\n    const badge = document.getElementById('versionBadge');\r\n    if (badge) {\r\n        const color = VERSION_COLORS[version] || '#ff0000';\r\n        badge.style.backgroundColor = color;\r\n        badge.style.boxShadow = `0 0 20px rgba(${hexToRgb(color)}, 0.8)`;\r\n    }\r\n}\r\n\r\n// Helper to convert hex to rgb for shadow\r\nfunction hexToRgb(hex) {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    if (result) {\r\n        return `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`;\r\n    }\r\n    return '255, 0, 0';\r\n}\r\n\r\n// Import core modules (side-effects & initializers)\r\n// Bootstrapping entry point\r\n// Bootstrapping entry point\r\nimport { initLanding } from './landing.js';\r\nimport { initDarkMode } from './darkMode.js';\r\nimport { initGameBackground } from './game-background.js';\r\nimport { ColorBurstEffect } from './colorBurst.js';\r\n// Modal manager exposes global handlers\r\nimport './modalManager.js';\r\n// Import logger\r\nimport * as logger from './logger.js';\r\n\r\n// Print logging guide to console\r\nfunction printLoggingGuide() {\r\n\tconsole.clear();\r\n\tconsole.log('%c🎮 BLOKUS GRID - LOGGING SYSTEM ACTIVE 🎮', \r\n\t\t'color: #90CAF9; font-size: 18px; font-weight: bold; text-shadow: 0 0 10px rgba(144, 202, 249, 0.8);');\r\n\t\r\n\tconsole.group('%c📊 CONSOLE LOGGER COMMANDS', 'color: #FFE66D; font-weight: bold; font-size: 14px;');\r\n\tconsole.log('%cControl Logging:', 'color: #66BB6A; font-weight: bold;');\r\n\tconsole.log('  • logger.LOG_ENABLED = false;          // Disable all logging');\r\n\tconsole.log('  • logger.LOG_DRAG = false;             // Disable drag-drop logging');\r\n\tconsole.log('  • logger.LOG_PLACEMENT = false;        // Disable placement logging');\r\n\tconsole.log('  • logger.LOG_SCORE = false;            // Disable score logging');\r\n\tconsole.log('  • logger.LOG_PERFORMANCE = false;      // Disable performance metrics');\r\n\tconsole.log('  • logger.LOG_GRID = false;             // Disable grid state logging');\r\n\tconsole.log('  • logger.LOG_ERRORS = false;           // Disable error logging');\r\n\tconsole.groupEnd();\r\n\t\r\n\tconsole.group('%c📍 WHAT TO LOOK FOR IN CONSOLE', 'color: #95E1D3; font-weight: bold; font-size: 14px;');\r\n\tconsole.log('%c1. DRAG & DROP EVENTS (Red):', 'color: #FF6B6B; font-weight: bold;');\r\n\tconsole.log('   - When piece drag starts/moves/ends');\r\n\tconsole.log('   - Shows if placement is VALID ✓ or INVALID ✗');\r\n\tconsole.log('');\r\n\tconsole.log('%c2. PLACEMENT & LINE CLEARS (Teal):', 'color: #4ECDC4; font-weight: bold;');\r\n\tconsole.log('   - When pieces are placed successfully');\r\n\tconsole.log('   - When lines are cleared');\r\n\tconsole.log('   - How many cells are freed');\r\n\tconsole.log('');\r\n\tconsole.log('%c3. SCORE UPDATES (Yellow):', 'color: #FFE66D; font-weight: bold;');\r\n\tconsole.log('   - Points earned for placements');\r\n\tconsole.log('   - Line clear bonuses');\r\n\tconsole.log('   - Combo multipliers');\r\n\tconsole.log('');\r\n\tconsole.log('%c4. PERFORMANCE METRICS (Mint):', 'color: #95E1D3; font-weight: bold;');\r\n\tconsole.log('   - How long each operation takes (milliseconds)');\r\n\tconsole.log('   - If any operation takes > 16ms (potential jank)');\r\n\tconsole.log('');\r\n\tconsole.log('%c5. GRID STATE (Blue):', 'color: #A8D8EA; font-weight: bold;');\r\n\tconsole.log('   - Empty cells remaining');\r\n\tconsole.log('   - Available moves count');\r\n\tconsole.log('');\r\n\tconsole.log('%c6. ERRORS & WARNINGS (Red):', 'color: #FF4444; font-weight: bold;');\r\n\tconsole.log('   - Invalid placements');\r\n\tconsole.log('   - Missing pieces');\r\n\tconsole.log('   - Game logic errors');\r\n\tconsole.groupEnd();\r\n\t\r\n\tconsole.group('%c💡 HOW TO USE FOR DEBUGGING', 'color: #A8D8EA; font-weight: bold; font-size: 14px;');\r\n\tconsole.log('%cExample 1: Drag feels laggy', 'color: #FFE66D; font-weight: bold;');\r\n\tconsole.log('  → Check PERF logs - are movement updates < 16ms?');\r\n\tconsole.log('  → Check DRAG MOVE logs - is validity check working correctly?');\r\n\tconsole.log('');\r\n\tconsole.log('%cExample 2: Placement is broken', 'color: #FFE66D; font-weight: bold;');\r\n\tconsole.log('  → Check PLACEMENT logs - is piece getting marked as VALID?');\r\n\tconsole.log('  → Check ERROR logs for rejection reasons');\r\n\tconsole.log('');\r\n\tconsole.log('%cExample 3: Score not updating', 'color: #FFE66D; font-weight: bold;');\r\n\tconsole.log('  → Check SCORE + logs - are points being added?');\r\n\tconsole.log('  → Check LINE CLEAR logs - are lines detected?');\r\n\tconsole.log('');\r\n\tconsole.log('%cExample 4: Game over too early', 'color: #FFE66D; font-weight: bold;');\r\n\tconsole.log('  → Check GRID STATE logs - when does move count hit 0?');\r\n\tconsole.log('  → Check PLACEMENT logs - which pieces failed?');\r\n\tconsole.groupEnd();\r\n\t\r\n\tconsole.log('%c✅ Ready to play! Open DevTools (F12) to see real-time logs', \r\n\t\t'color: #66BB6A; font-size: 12px; font-style: italic;');\r\n\tconsole.log('');\r\n\t\r\n\t// Show detailed performance timing guide\r\n\tconsole.log('%c⏱️ TIP: For DETAILED performance metrics, type in console:', \r\n\t\t'color: #95E1D3; font-weight: bold;');\r\n\tconsole.log('  → logger.logPerformanceGuide()');\r\n\tconsole.log('');\r\n}\r\n\r\n// Bootstrap all modules on DOMContentLoaded\r\n// Initialize all modules when DOM is ready\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\t// Print logging guide first\r\n\tprintLoggingGuide();\r\n\t\r\n\t// Initialize version badge first\r\n\tinitVersionBadge();\r\n\t\r\n\tinitLanding();\r\n\tinitDarkMode();\r\n\tinitGameBackground();\r\n\r\n\t// Register service worker for PWA offline support.\r\n\t// Use absolute path to the repo base so it works on GitHub Pages.\r\n\ttry {\r\n\t\tif ('serviceWorker' in navigator) {\r\n\t\t\t// Register service worker with prefetch check to avoid noisy 404 logs.\r\n\t\t\t// Try repo base (`/BlokusFocus/sw.js`) first, then fall back to `/sw.js`.\r\n\t\t\t(async () => {\r\n\t\t\t\tconst candidates = ['/BlokusFocus/sw.js', '/sw.js'];\r\n\t\t\t\tfor (const swPath of candidates) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t// Prefetch to check if the script exists before registration\r\n\t\t\t\t\t\tconst resp = await fetch(swPath, { method: 'HEAD', cache: 'no-store' });\r\n\t\t\t\t\t\tif (!resp.ok) {\r\n\t\t\t\t\t\t\tconsole.debug('SW not found at', swPath);\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst reg = await navigator.serviceWorker.register(swPath);\r\n\t\t\t\t\t\tconsole.log('ServiceWorker registered with', swPath, 'scope:', reg.scope);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tconsole.debug('SW registration attempt failed for', swPath);\r\n\t\t\t\t\t\t// try next candidate\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t}\r\n\t} catch (e) {\r\n\t\tconsole.warn('ServiceWorker registration error', e);\r\n\t}\r\n\t// Color burst effect on logo\r\n\tif (document.querySelector('.logo')) {\r\n\t\twindow.colorBurstEffect = new ColorBurstEffect();\r\n\t}\r\n\t// Highlight special-action buttons on click\r\n\tconst specialBtns = document.querySelectorAll('.special-actions .action-btn');\r\n\tspecialBtns.forEach(btn => {\r\n\t\tbtn.addEventListener('click', () => {\r\n\t\t\tspecialBtns.forEach(b => b.classList.remove('active'));\r\n\t\t\tbtn.classList.add('active');\r\n\t\t});\r\n\t});\r\n\r\n\t// Defer enabling heavy blur effects until the browser is idle\r\n\tconst enableGlass = () => document.body.classList.add('glass-ready');\r\n\tif ('requestIdleCallback' in window) {\r\n\t\trequestIdleCallback(enableGlass, { timeout: 1500 });\r\n\t} else {\r\n\t\tsetTimeout(enableGlass, 1200);\r\n\t}\r\n\r\n\t// Modal accessibility: focus management & ESC key\r\n\tconst modal = document.getElementById('settingsModal');\r\n\tconst openBtn = document.getElementById('settingsButton');\r\n\tconst closeBtn = modal?.querySelector('.settings-close');\r\n\tconst title = document.getElementById('settingsTitle');\r\n\r\n\tfunction openSettings() {\r\n\t\tif (!modal) return;\r\n\t\tmodal.style.display = 'flex';\r\n\t\tif (title) setTimeout(() => title.focus(), 50);\r\n\t\tdocument.addEventListener('keydown', escClose);\r\n\t}\r\n\r\n\tfunction closeSettings() {\r\n\t\tif (!modal) return;\r\n\t\tmodal.style.display = 'none';\r\n\t\tdocument.removeEventListener('keydown', escClose);\r\n\t\tif (openBtn) openBtn.focus();\r\n\t}\r\n\r\n\tfunction escClose(e) {\r\n\t\tif (e.key === 'Escape') closeSettings();\r\n\t}\r\n\r\n\topenBtn?.addEventListener('click', openSettings);\r\n\tcloseBtn?.addEventListener('click', closeSettings);\r\n});\r\n"],"file":"assets/index-CCJ1z2Eg.js"}