{"version":3,"mappings":"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","names":["logGridDimensions","root","gridContainer","grid","gameArea","gridCellSize","gameGridPadding","gameGridBorder","gameGridContentSize","gameGridTotalSize","viewHeight","mobileGridMaxSize","containerRect","gridRect","areaRect","tutorialPlayed","showTutorialModal","shouldRun","modalOverlay","modalHTML","closeModal","e","runTutorialAnimation","scoreEl","pieceContainer","finger","initializeTutorialGrid","setupPrefilledRow","initializeTutorialPiece","startAnimationSequence","createTutorialBlock","colorTheme","block","theme","cells","cell","rowToFill","tealTheme","i","targetCellRect","pieceRect","deltaX","deltaY","index","resetTutorialAnimation","initLanding","animatePieceShowcase","classicShowcase","collectionShowcase","classicBlocks","collectionBlocks","colorPalettes","classicShapes","collectionShapes","classicIndex","collectionIndex","applyShape","blocks","shape","gatherPoint","showModal","type","content","specialActions","highScoreEl","piecesUnlockedEl","count","score","stat","target","current","increment","updateCount","howToPlayButton","contactButton","modeButtons","hasLoadedOnce","button","selectedMode","landingPage","gameContainer","__vitePreload","initMain","err","existing","banner","iconContainer","DarkModeManager","gameToggle","landingToggle","newTheme","metaThemeColor","scoreGradient","gameIcon","iconClass","title","gameBtn","themeToggle","moonIcon","sunIcon","systemTheme","initDarkMode","darkModeManager","initGameBackground","generateStars","resizeTimeout","starsContainer","isMobile","starCount","star","top","left","maxSize","size","ColorBurstEffect","logo","event","clickNumber","clickIndicator","rect","centerX","centerY","x","y","ripple","wave","particleCount","particle","color","angle","distance","endX","endY","sparkleCount","sparkle","offsetX","offsetY","rand","audioContext","oscillator","gainNode","showSettingsModal","modal","soundCheckbox","musicCheckbox","vibrationCheckbox","ev","handleBackdropClick","modalContent","closeSettingsModal","html","modalBody","showHowToPlay","showContact","showAchievements","initializeSettings","soundEnabled","musicEnabled","vibrationEnabled","VERSION_COLORS","initVersionBadge","versionMeta","version","versionNumber","badge","hexToRgb","hex","result","printLoggingGuide","candidates","swPath","reg","specialBtns","btn","b","enableGlass","openBtn","closeBtn","openSettings","escClose","closeSettings"],"ignoreList":[],"sources":["../../js/debugGridMobile.js?v=5.1","../../js/tutorialAnimation.js","../../js/landing.js","../../js/darkMode.js","../../js/game-background.js","../../js/colorBurst.js","../../js/modalManager.js","../../js/app.js?v=5.1"],"sourcesContent":["// Debug logging for mobile grid sizing\n(function() {\n    function logGridDimensions() {\n        const root = document.documentElement;\n        const gridContainer = document.querySelector('.game-grid-container');\n        const grid = document.querySelector('.game-grid');\n        const gameArea = document.querySelector('.game-area');\n        \n        // Get computed CSS variables\n        const gridCellSize = getComputedStyle(root).getPropertyValue('--grid-cell-size').trim();\n        const gameGridPadding = getComputedStyle(root).getPropertyValue('--game-grid-padding').trim();\n        const gameGridBorder = getComputedStyle(root).getPropertyValue('--game-grid-border').trim();\n        const gameGridContentSize = getComputedStyle(root).getPropertyValue('--game-grid-content-size').trim();\n        const gameGridTotalSize = getComputedStyle(root).getPropertyValue('--game-grid-total-size').trim();\n        const viewHeight = getComputedStyle(root).getPropertyValue('--view-height').trim();\n        const mobileGridMaxSize = getComputedStyle(root).getPropertyValue('--mobile-grid-max-size').trim();\n        \n        console.group('ðŸŽ® MOBILE GRID DEBUG');\n        console.log('%cCSS Variables:', 'color: #FFD700; font-weight: bold;');\n        console.log('--grid-cell-size:', gridCellSize);\n        console.log('--game-grid-padding:', gameGridPadding);\n        console.log('--game-grid-border:', gameGridBorder);\n        console.log('--game-grid-content-size:', gameGridContentSize);\n        console.log('--game-grid-total-size:', gameGridTotalSize);\n        console.log('--view-height:', viewHeight);\n        console.log('--mobile-grid-max-size:', mobileGridMaxSize);\n        \n        if (gridContainer) {\n            const containerRect = gridContainer.getBoundingClientRect();\n            console.log('%c.game-grid-container (actual):', 'color: #00FF00; font-weight: bold;');\n            console.log(`Width: ${containerRect.width}px, Height: ${containerRect.height}px`);\n            console.log(`Padding: ${getComputedStyle(gridContainer).padding}`);\n            console.log(`Border-radius: ${getComputedStyle(gridContainer).borderRadius}`);\n        }\n        \n        if (grid) {\n            const gridRect = grid.getBoundingClientRect();\n            console.log('%c.game-grid (actual):', 'color: #00BFFF; font-weight: bold;');\n            console.log(`Width: ${gridRect.width}px, Height: ${gridRect.height}px`);\n            console.log(`Padding: ${getComputedStyle(grid).padding}`);\n            console.log(`Border-radius: ${getComputedStyle(grid).borderRadius}`);\n            console.log(`Max-width: ${getComputedStyle(grid).maxWidth}`);\n            console.log(`Max-height: ${getComputedStyle(grid).maxHeight}`);\n        }\n        \n        if (gameArea) {\n            const areaRect = gameArea.getBoundingClientRect();\n            console.log('%c.game-area (actual):', 'color: #FF69B4; font-weight: bold;');\n            console.log(`Width: ${areaRect.width}px, Height: ${areaRect.height}px`);\n            console.log(`Display: ${getComputedStyle(gameArea).display}`);\n            console.log(`Justify-content: ${getComputedStyle(gameArea).justifyContent}`);\n            console.log(`Align-items: ${getComputedStyle(gameArea).alignItems}`);\n        }\n        \n        console.log('%cViewport:', 'color: #FF1493; font-weight: bold;');\n        console.log(`Window width: ${window.innerWidth}px`);\n        console.log(`Window height: ${window.innerHeight}px`);\n        console.log(`Is mobile (<= 768px): ${window.innerWidth <= 768}`);\n        \n        console.groupEnd();\n    }\n    \n    // Run on page load\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', logGridDimensions);\n    } else {\n        logGridDimensions();\n    }\n    \n    // Also expose a function to call from console\n    window.debugGrid = logGridDimensions;\n})();\n","// Tutorial Animation System for \"How to Play\" feature\n// This module handles all the logic for the tutorial modal and animation\n\nlet tutorialPlayed = false;\n\nexport function showTutorialModal() {\n    const shouldRun = !tutorialPlayed;\n    tutorialPlayed = true;\n    const modalOverlay = document.createElement('div');\n    modalOverlay.className = 'modal-overlay';\n    \n    const modalHTML = `\n        <div class=\"modal-content tutorial-modal\">\n            <h2>How to Play</h2>\n            <div class=\"tutorial-container\">\n                <div class=\"tutorial-score\" id=\"tutorial-score\">Score: 0</div>\n                <div class=\"tutorial-grid\" id=\"tutorial-grid\"></div>\n                <div class=\"tutorial-piece-area\">\n                    <div class=\"tutorial-piece\" id=\"tutorial-piece\">\n                        <div class=\"p-block\"></div><div class=\"p-block\"></div><div class=\"p-block\"></div><div class=\"p-block\"></div>\n                    </div>\n                    <div class=\"tutorial-finger\" id=\"tutorial-finger\"><i class=\"fa-solid fa-hand-pointer\"></i></div>\n                </div>\n            </div>\n            <button class=\"modal-close-btn\">Got it!</button>\n        </div>`;\n\n    modalOverlay.innerHTML = modalHTML;\n    document.body.appendChild(modalOverlay);\n    document.body.classList.add('no-scroll');  // Disable body scrolling\n    \n    // Close modal handlers\n    const closeModal = () => { \n        if (document.body.contains(modalOverlay)) { \n            document.body.removeChild(modalOverlay);\n            document.body.classList.remove('no-scroll'); // Re-enable scrolling\n        }\n    };\n    \n    modalOverlay.querySelector('.modal-close-btn').addEventListener('click', closeModal);\n    modalOverlay.addEventListener('click', (e) => { \n        if(e.target === modalOverlay) closeModal(); \n    });\n\n    // Start the animation only once\n    if (shouldRun) runTutorialAnimation();\n}\n\nfunction runTutorialAnimation() {\n    const grid = document.getElementById('tutorial-grid');\n    const scoreEl = document.getElementById('tutorial-score');\n    const pieceContainer = document.getElementById('tutorial-piece');\n    const finger = document.getElementById('tutorial-finger');\n    \n    if(!grid || !scoreEl || !pieceContainer || !finger) return;\n\n    // Initialize grid with 100 cells\n    initializeTutorialGrid(grid);\n    \n    // Create pre-filled row (missing 4 blocks in the middle)\n    setupPrefilledRow(grid);\n    \n    // Initialize the falling piece\n    initializeTutorialPiece(pieceContainer);\n    \n    // Start the animation sequence\n    startAnimationSequence(grid, scoreEl, pieceContainer, finger);\n}\n\nfunction createTutorialBlock(colorTheme) {\n    const block = document.createElement('div');\n    block.className = 'block';\n    \n    const defaultTheme = {\n        dark1: '#d64e1f', \n        dark2: '#a3320f',\n        coreLight: 'rgba(255, 187, 166, 0.8)',\n        coreMid: 'rgba(255, 137, 98, 0.5)',\n        bevelLight: 'rgba(255, 255, 255, 0.2)',\n        bevelDark: 'rgba(80, 24, 0, 0.4)',\n        highlight: 'rgba(230, 240, 255, 0.5)'\n    };\n    \n    const theme = colorTheme || defaultTheme;\n    \n    block.style.setProperty('--color-dark-1', theme.dark1);\n    block.style.setProperty('--color-dark-2', theme.dark2);\n    block.style.setProperty('--color-core-light', theme.coreLight);\n    block.style.setProperty('--color-core-mid', theme.coreMid);\n    block.style.setProperty('--color-bevel-light', theme.bevelLight);\n    block.style.setProperty('--color-bevel-dark', theme.bevelDark);\n    block.style.setProperty('--color-highlight', theme.highlight);\n    \n    return block;\n}\n\nfunction initializeTutorialGrid(grid) {\n    grid.innerHTML = '';\n    \n    // Create 100 cells (10x10 grid)\n    const cells = Array.from({ length: 100 }, () => {\n        const cell = document.createElement('div');\n        cell.classList.add('grid-cell');\n        grid.appendChild(cell);\n        return cell;\n    });\n    \n    // Store cells reference for later use\n    grid._cells = cells;\n}\n\nfunction setupPrefilledRow(grid) {\n    const cells = grid._cells;\n    const rowToFill = 5; // Row 6 (0-indexed)\n    \n    // Fill the row except for positions 3, 4, 5, 6 (where the piece will fit)\n    const tealTheme = {\n        dark1: '#14b8a6', \n        dark2: '#0f766e',\n        coreLight: 'rgba(166, 246, 237, 0.8)',\n        coreMid: 'rgba(109, 235, 224, 0.5)',\n        bevelLight: 'rgba(255, 255, 255, 0.2)',\n        bevelDark: 'rgba(0, 77, 70, 0.4)',\n        highlight: 'rgba(255, 255, 240, 0.5)'\n    };\n    \n    for(let i = 0; i < 10; i++) {\n        if (i < 3 || i > 6) { // Skip the middle 4 positions\n            cells[rowToFill * 10 + i].appendChild(createTutorialBlock(tealTheme));\n        }\n    }\n}\n\nfunction initializeTutorialPiece(pieceContainer) {\n    pieceContainer.innerHTML = '';\n    \n    // Create 4 blocks for the I-piece (tetromino)\n    for(let i = 0; i < 4; i++) {\n        const block = createTutorialBlock(); // Uses default orange theme\n        pieceContainer.appendChild(block);\n    }\n}\n\nfunction startAnimationSequence(grid, scoreEl, pieceContainer, finger) {\n    const cells = grid._cells;\n    \n    // Phase 1: Show finger (500ms)\n    setTimeout(() => { \n        finger.style.opacity = '1'; \n        finger.style.transform = 'translate(0, 0)'; \n    }, 500);\n    \n    // Phase 2: Scale down piece slightly (1500ms)\n    setTimeout(() => { \n        pieceContainer.style.transform = 'scale(0.9)'; \n    }, 1500);\n    \n    // Phase 3: Move piece and finger to target position (2000ms)\n    setTimeout(() => { \n        const targetCellRect = cells[53].getBoundingClientRect(); // Row 5, Column 3\n        const pieceRect = pieceContainer.getBoundingClientRect();\n\n        const deltaX = targetCellRect.left - pieceRect.left;\n        const deltaY = targetCellRect.top - pieceRect.top;\n        \n        finger.style.transform = `translate(${deltaX}px, ${deltaY}px)`; \n        pieceContainer.style.transform = `translate(${deltaX}px, ${deltaY}px)`;\n    }, 2000);\n\n    // Phase 4: Place piece and hide moving elements (3500ms)\n    setTimeout(() => {\n        pieceContainer.style.opacity = '0';\n        finger.style.opacity = '0';\n        \n        // Place blocks in the grid\n        const targetIndexes = [53, 54, 55, 56]; // 4 consecutive cells in row 5\n        targetIndexes.forEach(index => {\n           cells[index].appendChild(createTutorialBlock());\n        });\n    }, 3500);\n\n    // Phase 5: Clear the completed row (4200ms)\n    setTimeout(() => {\n        const rowToFill = 5;\n        for(let i = 0; i < 10; i++) {\n            const cell = cells[rowToFill * 10 + i];\n            const block = cell.querySelector('.block');\n            if (block) {\n                block.classList.add('clearing');\n            }\n        }\n    }, 4200);\n\n    // Phase 6: Update score (4700ms)\n    setTimeout(() => {\n        scoreEl.textContent = `Score: 100`;\n        scoreEl.classList.add('updated');\n    }, 4700);\n    \n    // Phase 7: Remove score animation (5000ms)\n    setTimeout(() => { \n        scoreEl.classList.remove('updated'); \n    }, 5000);\n    \n    // Phase 8: Reset for loop (6000ms)\n    setTimeout(() => {\n        resetTutorialAnimation(grid, scoreEl, pieceContainer, finger);\n    }, 6000);\n}\n\nfunction resetTutorialAnimation(grid, scoreEl, pieceContainer, finger) {\n    // Reset score\n    scoreEl.textContent = 'Score: 0';\n    scoreEl.classList.remove('updated');\n    \n    // Reset piece position and visibility\n    pieceContainer.style.transform = 'scale(1)';\n    pieceContainer.style.opacity = '1';\n    \n    // Reset finger\n    finger.style.opacity = '0';\n    finger.style.transform = 'translate(0, 50px)';\n    \n    // Clear and rebuild grid\n    initializeTutorialGrid(grid);\n    setupPrefilledRow(grid);\n    initializeTutorialPiece(pieceContainer);\n    \n    // Restart animation\n    setTimeout(() => {\n        startAnimationSequence(grid, scoreEl, pieceContainer, finger);\n    }, 1000);\n}\n\n// Export the main function for use in landing.js\nexport { createTutorialBlock };\n","// import updateLandingPageStats from main.js removed to enable lazy-loading of game code\nimport { showTutorialModal } from './tutorialAnimation.js';\n\n// Initialize landing page behaviors\nexport function initLanding() {\n    \n    // Animation and interaction logic from new design\n    function animatePieceShowcase() {\n        const step = 33.3; \n        const classicShowcase = document.querySelector('[data-mode=\"classic\"] .piece-showcase');\n        const collectionShowcase = document.querySelector('[data-mode=\"collection\"] .piece-showcase');\n        \n        if (!classicShowcase || !collectionShowcase) return;\n        \n        const classicBlocks = classicShowcase.querySelectorAll('.block');\n        const collectionBlocks = collectionShowcase.querySelectorAll('.block');\n        const colorPalettes = [\n            { dark1: '#2a7dcc', dark2: '#164d85', coreLight: 'rgba(168, 208, 255, 0.8)', coreMid: 'rgba(94, 174, 255, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(15, 52, 92, 0.4)', highlight: 'rgba(255, 235, 225, 0.5)' },\n            { dark1: '#d64e1f', dark2: '#a3320f', coreLight: 'rgba(255, 187, 166, 0.8)', coreMid: 'rgba(255, 137, 98, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(80, 24, 0, 0.4)', highlight: 'rgba(230, 240, 255, 0.5)' },\n            { dark1: '#34c759', dark2: '#1d8a3c', coreLight: 'rgba(170, 255, 195, 0.8)', coreMid: 'rgba(117, 255, 150, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(0, 74, 15, 0.4)', highlight: 'rgba(255, 255, 230, 0.5)' },\n            { dark1: '#705ce1', dark2: '#4d38ba', coreLight: 'rgba(213, 204, 255, 0.8)', coreMid: 'rgba(175, 159, 255, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(38, 23, 105, 0.4)', highlight: 'rgba(230, 255, 235, 0.5)' },\n            { dark1: '#cd5498', dark2: '#9e3670', coreLight: 'rgba(250, 187, 218, 0.8)', coreMid: 'rgba(246, 137, 195, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(77, 21, 52, 0.4)', highlight: 'rgba(230, 255, 235, 0.5)' },\n            { dark1: '#d4c22b', dark2: '#a0920c', coreLight: 'rgba(255, 255, 171, 0.8)', coreMid: 'rgba(255, 255, 122, 0.5)', bevelLight: 'rgba(255, 255, 255, 0.2)', bevelDark: 'rgba(77, 69, 0, 0.4)', highlight: 'rgba(235, 230, 255, 0.5)' }\n        ];\n        const classicShapes = [\n            { name: 'cross', coords: [ {t:0,l:step}, {t:step,l:0}, {t:step,l:step}, {t:step,l:step*2}, {t:step*2,l:step} ], colorIndex: 0 },\n            { name: 'ushape', coords: [ {t:0,l:0}, {t:step,l:0}, {t:step,l:step}, {t:step,l:step*2}, {t:0,l:step*2} ], colorIndex: 1 },\n            { name: 'fshape_new', coords: [ {t:step, l:0}, {t:0, l:step}, {t:step, l:step}, {t:step*2, l:step}, {t:step, l:step*2} ], colorIndex: 2 }\n        ];\n        const collectionShapes = [\n            { name: 'lshape', coords: [ {t:0,l:0}, {t:step,l:0}, {t:step*2,l:0}, {t:step*2,l:step} ], colorIndex: 3 },\n            { name: 'square', coords: [ {t:0,l:0}, {t:0,l:step}, {t:step,l:0}, {t:step,l:step} ], colorIndex: 4 },\n            { name: 'tshape', coords: [ {t:0,l:step}, {t:step,l:0}, {t:step,l:step}, {t:step,l:step*2} ], colorIndex: 5 }\n        ];\n        let classicIndex = 0; \n        let collectionIndex = 0;\n        \n        const applyShape = (blocks, shape) => {\n            const colorTheme = colorPalettes[shape.colorIndex];\n            const gatherPoint = { t: step, l: step };\n            blocks.forEach((block, i) => {\n                block.style.transitionDelay = `${i * 30}ms`; \n                if (block.style.opacity !== '0') {\n                   block.style.top = `${gatherPoint.t}%`;\n                   block.style.left = `${gatherPoint.l}%`;\n                }\n            });\n            setTimeout(() => {\n                blocks.forEach((block, i) => {\n                    block.style.transitionDelay = `${i * 60}ms`; \n                    block.style.setProperty('--color-dark-1', colorTheme.dark1);\n                    block.style.setProperty('--color-dark-2', colorTheme.dark2);\n                    block.style.setProperty('--color-core-light', colorTheme.coreLight);\n                    block.style.setProperty('--color-core-mid', colorTheme.coreMid);\n                    block.style.setProperty('--color-bevel-light', colorTheme.bevelLight);\n                    block.style.setProperty('--color-bevel-dark', colorTheme.bevelDark);\n                    block.style.setProperty('--color-highlight', colorTheme.highlight);\n                    if (shape.coords[i]) {\n                        block.style.opacity = '1';\n                        block.style.top = `${shape.coords[i].t}%`;\n                        block.style.left = `${shape.coords[i].l}%`;\n                    } else { \n                        block.style.opacity = '0'; \n                    }\n                });\n            }, 750);\n        };\n        \n        applyShape(classicBlocks, classicShapes[0]);\n        applyShape(collectionBlocks, collectionShapes[0]);\n        \n        setInterval(() => {\n            classicIndex = (classicIndex + 1) % classicShapes.length;\n            applyShape(classicBlocks, classicShapes[classicIndex]);\n        }, 2500);\n        setInterval(() => {\n            collectionIndex = (collectionIndex + 1) % collectionShapes.length;\n            applyShape(collectionBlocks, collectionShapes[collectionIndex]);\n        }, 2500);\n    }\n\n    function showModal(type, content) {\n        if (type === 'tutorial') {\n            showTutorialModal();\n            return;\n        }\n        \n        // Handle other modal types (like contact)\n        const modalOverlay = document.createElement('div');\n        modalOverlay.className = 'modal-overlay';\n        const modalHTML = `<div class=\"modal-content\"><h2>${type}</h2><p>${content}</p><button class=\"modal-close-btn\">Close</button></div>`;\n        modalOverlay.innerHTML = modalHTML;\n        document.body.appendChild(modalOverlay);\n        \n        const closeModal = () => { if (document.body.contains(modalOverlay)) { document.body.removeChild(modalOverlay); }};\n        modalOverlay.querySelector('.modal-close-btn').addEventListener('click', closeModal);\n        modalOverlay.addEventListener('click', (e) => { if(e.target === modalOverlay) closeModal(); });\n    }\n\n    \n    // Hide special-actions until game starts\n    const specialActions = document.querySelector('.special-actions');\n    if (specialActions) specialActions.classList.add('hidden');\n    // Initialize animations and stats\n    animatePieceShowcase();\n    // Inline stats update to avoid loading main.js\n    (function updateLandingPageStatsInline() {\n        const highScoreEl = document.getElementById('highscore-display');\n        if (highScoreEl) {\n            highScoreEl.textContent = localStorage.getItem('blokusHighScore') || '0';\n        }\n        const piecesUnlockedEl = document.getElementById('pieces-unlocked');\n        if (piecesUnlockedEl) {\n            let count = 7;\n            const score = parseInt(localStorage.getItem('blokusHighScore') || '0');\n            if (score >= 2000) count += 6;\n            if (score >= 4000) count += 6;\n            if (score >= 6000) count += 6;\n            if (score >= 8000) count += 5;\n            piecesUnlockedEl.textContent = Math.min(count, 30);\n        }\n    })();\n\n    // Animate stats counters\n    const stats = document.querySelectorAll('.stat-value');\n    stats.forEach(stat => {\n        const target = +stat.getAttribute('data-target') || parseInt(stat.textContent);\n        let current = 0;\n        const increment = target / 100;\n        const updateCount = () => {\n            if (current < target) {\n                current += increment;\n                stat.innerText = Math.ceil(current);\n                requestAnimationFrame(updateCount);\n            } else {\n                stat.innerText = target;\n            }\n        };\n        setTimeout(() => {\n            updateCount();\n        }, 500); \n    });\n    \n    // Button event handlers\n    const howToPlayButton = document.getElementById('how-to-play-btn');\n    if (howToPlayButton) {\n        howToPlayButton.addEventListener('click', () => { \n            showModal('tutorial'); \n        });\n    }\n\n    const contactButton = document.getElementById('contact-btn');\n    if (contactButton) {\n        contactButton.addEventListener('click', () => { \n            showModal('Contact', 'For any questions, contact us at: contact@blokusblast.com'); \n        });\n    }\n    \n    // Mode selection with loading animation and game start\n    const modeButtons = document.querySelectorAll('.mode-button.selectable');\n    let hasLoadedOnce = false;\n    modeButtons.forEach(button => {\n        button.addEventListener('click', function() {\n            const selectedMode = this.dataset.mode;\n            localStorage.setItem('selectedGameMode', selectedMode);\n            const landingPage = document.getElementById('landingPage');\n            const gameContainer = document.querySelector('.game-container');\n            if (!hasLoadedOnce) {\n                // Lazy-load game code modules\n                import('./main.js').then(({ initMain }) => {\n                    initMain();\n                }).catch(err => {\n                    console.error('Lazy import failed:', err);\n                    // Show a visible banner with the error so it's obvious on phones\n                    try {\n                        const existing = document.getElementById('clientImportErrorBanner');\n                        if (existing) existing.remove();\n                        const banner = document.createElement('div');\n                        banner.id = 'clientImportErrorBanner';\n                        banner.style.position = 'fixed';\n                        banner.style.left = '12px';\n                        banner.style.right = '12px';\n                        banner.style.bottom = '24px';\n                        banner.style.zIndex = '99999';\n                        banner.style.background = 'linear-gradient(90deg,#ff6b6b,#ff4757)';\n                        banner.style.color = '#fff';\n                        banner.style.padding = '12px 16px';\n                        banner.style.borderRadius = '8px';\n                        banner.style.boxShadow = '0 6px 20px rgba(0,0,0,0.4)';\n                        banner.style.fontSize = '14px';\n                        banner.style.lineHeight = '1.2';\n                        banner.textContent = 'Error loading game: ' + (err && err.message ? err.message : String(err));\n                        document.body.appendChild(banner);\n                    } catch (e) {\n                        // swallow errors while reporting\n                    }\n                });\n                // VetÃ«m spinner nÃ« buton, pa modal\n                const iconContainer = this.querySelector('.icon');\n                if (iconContainer) {\n                    iconContainer.innerHTML = `<i class=\"fa-solid fa-spinner fa-spin\" style=\"font-size: 2.5rem;\"></i>`;\n                }\n                setTimeout(() => {\n                    if (landingPage && gameContainer) {\n                        landingPage.classList.add('hidden');\n                        document.body.classList.remove('landing-page');\n                        gameContainer.classList.remove('hidden');\n                        window.selectedGameMode = selectedMode;\n                        // Show special-actions container\n                        const specialActions = document.querySelector('.special-actions');\n                        if (specialActions) specialActions.classList.remove('hidden');\n                        if (typeof window.initializeGame === 'function') {\n                            window.initializeGame();\n                        }\n                    }\n                    hasLoadedOnce = true;\n                }, 1500);\n            } else {\n                // Fut direkt nÃ« lojÃ« pa animacion\n                if (landingPage && gameContainer) {\n                    landingPage.classList.add('hidden');\n                    gameContainer.classList.remove('hidden');\n                    window.selectedGameMode = selectedMode;\n                        // Show special-actions container\n                        const specialActions = document.querySelector('.special-actions');\n                        if (specialActions) specialActions.classList.remove('hidden');\n                    if (typeof window.initializeGame === 'function') {\n                        window.initializeGame();\n                    }\n                }\n            }\n        });\n    });\n\n} // end initLanding\n","// Dark Mode Management System\nclass DarkModeManager {\n    constructor() {\n        this.currentTheme = localStorage.getItem('blokus-theme') || 'default';\n        this.init();\n    }\n\n    init() {\n        // Apply saved theme on load\n        this.applyTheme(this.currentTheme);\n        \n        // Initialize toggle buttons\n        this.initToggleButtons();\n        \n        // Update UI icons\n        this.updateIcons();\n    }\n\n    initToggleButtons() {\n        // Game page toggle\n        const gameToggle = document.getElementById('darkModeToggleGame');\n        if (gameToggle) {\n            gameToggle.addEventListener('click', () => this.toggleTheme());\n        }\n\n    // Landing page toggle (actual ID in template)\n    const landingToggle = document.getElementById('theme-toggle');\n        if (landingToggle) {\n            landingToggle.addEventListener('click', () => this.toggleTheme());\n        }\n    }\n\n    toggleTheme() {\n        const newTheme = this.currentTheme === 'dark' ? 'default' : 'dark';\n        this.setTheme(newTheme);\n    }\n\n    setTheme(theme) {\n        this.currentTheme = theme;\n        this.applyTheme(theme);\n        this.saveTheme(theme);\n        this.updateIcons();\n        \n        // Dispatch custom event for other components\n        window.dispatchEvent(new CustomEvent('themeChanged', { \n            detail: { theme: theme } \n        }));\n    }\n\n    applyTheme(theme) {\n    document.body.setAttribute('data-theme', theme);\n    // Get reference to game container for background styling\n    const gameContainer = document.querySelector('.game-container');\n        // Always apply dark mode background on the game container\n        // Body background remains skipped on landing page\n        if (theme === 'dark') {\n            // Body gradient (only effective after landing page)\n            if (!document.body.classList.contains('landing-page')) {\n                const bodyGradient = 'linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #16213e 75%, #1a1a2e 100%)';\n                document.body.style.setProperty('background', bodyGradient, 'important');\n                document.body.style.setProperty('background-size', '400% 400%', 'important');\n                document.body.style.setProperty('animation', 'dark-gradient-animation 30s ease infinite', 'important');\n            }\n            // Game container always styled\n            if (gameContainer) {\n                gameContainer.style.setProperty('background', `\n                        radial-gradient(circle at 15% 20%, rgba(135, 206, 235, 0.3) 0%, transparent 45%),\n                        radial-gradient(circle at 80% 70%, rgba(100, 149, 237, 0.4) 0%, transparent 45%),\n                        radial-gradient(circle at 40% 85%, rgba(72, 61, 139, 0.4) 0%, transparent 45%),\n                        radial-gradient(circle at 65% 25%, rgba(25, 25, 112, 0.5) 0%, transparent 45%),\n                        linear-gradient(135deg, #1a1a2e, #16213e, #0f3460, #16213e)\n                    `, 'important');\n            }\n        } else {\n            // Remove body dark gradient\n            document.body.style.removeProperty('background');\n            document.body.style.removeProperty('background-size');\n            document.body.style.removeProperty('animation');\n            // Always clear game container background\n            if (gameContainer) {\n                gameContainer.style.removeProperty('background');\n            }\n        }\n        // Force style recalculation\n        document.body.offsetHeight;\n        \n        // Update meta theme-color for mobile browsers\n        const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n        if (metaThemeColor) {\n            metaThemeColor.content = theme === 'dark' ? '#1a1a2e' : '#667eea';\n        }\n\n    // Also set CSS-level fallback for score gradient so JS-triggered theme changes reflect immediately\n    let scoreGradient;\n    if (theme === 'dark') scoreGradient = 'linear-gradient(135deg, #FFD700 0%, #FBBF24 50%, #FFA500 100%)';\n    else if (theme === 'forest') scoreGradient = 'linear-gradient(135deg, #34d399 0%, #16a34a 100%)';\n    else scoreGradient = 'linear-gradient(135deg, #34d399 0%, #10b981 50%, #059669 100%)';\n    document.body.style.setProperty('--score-gradient', scoreGradient, 'important');\n    // Ghost color variables (theme aware)\n    if (theme === 'dark') {\n        document.body.style.setProperty('--ghost-border-color', 'rgba(86,176,255,0.95)', 'important');\n        document.body.style.setProperty('--ghost-glow-color', 'rgba(86,176,255,0.55)', 'important');\n        document.body.style.setProperty('--ghost-fill-color', 'rgba(86,176,255,0.12)', 'important');\n    } else if (theme === 'forest') {\n        document.body.style.setProperty('--ghost-border-color', 'rgba(34,197,94,0.95)', 'important');\n        document.body.style.setProperty('--ghost-glow-color', 'rgba(34,197,94,0.5)', 'important');\n        document.body.style.setProperty('--ghost-fill-color', 'rgba(34,197,94,0.12)', 'important');\n    } else {\n        // Default / light theme: restore original yellow ghost outline\n        document.body.style.setProperty('--ghost-border-color', 'rgba(255,229,59,0.95)', 'important');\n        document.body.style.setProperty('--ghost-glow-color', 'rgba(255,229,59,0.55)', 'important');\n        document.body.style.setProperty('--ghost-fill-color', 'rgba(255,229,59,0.12)', 'important');\n    }\n    }\n\n    updateIcons() {\n    const gameIcon = document.getElementById('darkModeIconGame');\n    const iconClass = this.currentTheme === 'dark' ? 'fa-sun' : 'fa-moon';\n    const title = this.currentTheme === 'dark' ? 'Switch to Light Mode' : 'Switch to Dark Mode';\n        // Update game page icon\n        if (gameIcon) {\n            gameIcon.className = `fas ${iconClass}`;\n            const gameBtn = gameIcon.parentElement;\n            if (gameBtn) {\n                gameBtn.setAttribute('title', title);\n                gameBtn.setAttribute('aria-label', title);\n                gameBtn.setAttribute('aria-pressed', this.currentTheme === 'dark' ? 'true' : 'false');\n            }\n        }\n        // Update landing page toggle icons\n        const themeToggle = document.getElementById('theme-toggle');\n        if (themeToggle) {\n            const moonIcon = themeToggle.querySelector('.icon-moon');\n            const sunIcon = themeToggle.querySelector('.icon-sun');\n            if (moonIcon && sunIcon) {\n                if (this.currentTheme === 'dark') {\n                    moonIcon.style.display = 'none';\n                    sunIcon.style.display = 'block';\n                } else {\n                    moonIcon.style.display = 'block';\n                    sunIcon.style.display = 'none';\n                }\n                themeToggle.setAttribute('title', title);\n                themeToggle.setAttribute('aria-label', title);\n                themeToggle.setAttribute('aria-pressed', this.currentTheme === 'dark' ? 'true' : 'false');\n            }\n        }\n    }\n\n    saveTheme(theme) {\n        localStorage.setItem('blokus-theme', theme);\n    }\n\n    getCurrentTheme() {\n        return this.currentTheme;\n    }\n\n    // System theme detection (optional)\n    detectSystemTheme() {\n        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n            return 'dark';\n        }\n        return 'default';\n    }\n\n    // Auto-switch based on system preference (optional)\n    enableAutoSwitch() {\n        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n        mediaQuery.addEventListener('change', (e) => {\n            const systemTheme = e.matches ? 'dark' : 'default';\n            this.setTheme(systemTheme);\n        });\n    }\n}\n\n// Initialize Dark Mode Manager\n// Initialize Dark Mode on demand\nexport function initDarkMode() {\n    const darkModeManager = new DarkModeManager();\n    // Make it globally accessible for debugging\n    window.darkModeManager = darkModeManager;\n}\n\n// Also export DarkModeManager class if needed\nexport default DarkModeManager;\n","// Generate stars for game background\n// Initialize game background effects\nexport function initGameBackground() {\n    // Generate initial stars\n    generateStars();\n    // Regenerate stars on resize for responsiveness\n    let resizeTimeout;\n    window.addEventListener('resize', function() {\n        clearTimeout(resizeTimeout);\n        resizeTimeout = setTimeout(generateStars, 300);\n    });\n}\n\nfunction generateStars() {\n    // Clear existing stars\n    const starsContainer = document.getElementById('gameStars');\n    \n    if (starsContainer) {\n        starsContainer.innerHTML = '';\n        \n        // Responsive star count\n        const isMobile = window.innerWidth <= 768;\n        const starCount = isMobile ? 80 : 200;\n        \n        for (let i = 0; i < starCount; i++) {\n            const star = document.createElement('div');\n            star.classList.add('star');\n            \n            // Random position\n            const top = Math.random() * 100;\n            const left = Math.random() * 100;\n            \n            star.style.top = `${top}%`;\n            star.style.left = `${left}%`;\n            \n            // Random size - smaller for mobile\n            const maxSize = isMobile ? 3 : 5;\n            const size = Math.random() * maxSize;\n            star.style.width = `${size}px`;\n            star.style.height = `${size}px`;\n            \n            // Random animation delay\n            star.style.animationDelay = `${Math.random() * 5}s`;\n            \n            starsContainer.appendChild(star);\n        }\n    }\n}","// Color Burst Effect System\nexport class ColorBurstEffect {\n    constructor() {\n        this.isActive = false;\n        this.particles = [];\n        this.clickCount = 0;\n        this.requiredClicks = 3;\n        this.clickTimeout = null;\n        this.colors = [\n            '#ff0096', // Hot pink\n            '#ff6900', // Orange  \n            '#ffd700', // Gold\n            '#00bfff', // Deep sky blue\n            '#8a2be2', // Blue violet\n            '#32cd32', // Lime green\n            '#ff4500', // Orange red\n            '#ff1493', // Deep pink\n            '#00ced1', // Dark turquoise\n            '#ff69b4'  // Hot pink\n        ];\n        this.init();\n    }\n\n    init() {\n        // Create color burst container\n        this.container = document.createElement('div');\n        this.container.className = 'color-burst-container';\n        document.body.appendChild(this.container);\n\n        // Add click event to logo\n        const logo = document.querySelector('.logo');\n        if (logo) {\n            logo.addEventListener('click', (e) => this.handleLogoClick(e));\n            \n            // Add visual hint\n            logo.style.cursor = 'pointer';\n            logo.setAttribute('title', 'Blokus â€“ Triple Click for Color Burst! ðŸŽ¨ (0/3)');\n        }\n    }\n\n    handleLogoClick(event) {\n        if (this.isActive) return;\n        \n        this.clickCount++;\n        const logo = event.target.closest('.logo');\n        \n        // Clear previous timeout\n        if (this.clickTimeout) {\n            clearTimeout(this.clickTimeout);\n        }\n        \n        // Update title to show progress\n        logo.setAttribute('title', `Blokus â€“ Triple Click for Color Burst! ðŸŽ¨ (${this.clickCount}/3)`);\n        \n        // Add visual feedback for each click\n        this.addClickFeedback(logo, this.clickCount);\n        \n        if (this.clickCount >= this.requiredClicks) {\n            // Trigger the color burst!\n            logo.setAttribute('title', 'Blokus â€“ Color Burst Activated! âœ¨');\n            this.triggerColorBurst(event);\n            this.resetClickCount();\n        } else {\n            // Reset click count after 2 seconds if not completed\n            this.clickTimeout = setTimeout(() => {\n                this.resetClickCount();\n                logo.setAttribute('title', 'Blokus â€“ Triple Click for Color Burst! ðŸŽ¨ (0/3)');\n            }, 2000);\n        }\n    }\n    \n    resetClickCount() {\n        this.clickCount = 0;\n        if (this.clickTimeout) {\n            clearTimeout(this.clickTimeout);\n            this.clickTimeout = null;\n        }\n    }\n    \n    addClickFeedback(logo, clickNumber) {\n        // Add a subtle bounce effect for each click\n        logo.style.transform = `scale(${1 + (clickNumber * 0.05)})`;\n        logo.style.filter = `drop-shadow(0 0 ${clickNumber * 5}px rgba(255, 229, 59, ${clickNumber * 0.3}))`;\n        \n        // Reset transform after animation\n        setTimeout(() => {\n            logo.style.transform = '';\n            logo.style.filter = '';\n        }, 200);\n        \n        // Create small click indicator\n        const clickIndicator = document.createElement('div');\n        clickIndicator.textContent = clickNumber;\n        clickIndicator.style.cssText = `\n            position: absolute;\n            top: -30px;\n            right: -10px;\n            background: #ff0096;\n            color: white;\n            border-radius: 50%;\n            width: 20px;\n            height: 20px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 12px;\n            font-weight: bold;\n            animation: click-bounce 0.5s ease-out;\n            pointer-events: none;\n            z-index: 1000;\n        `;\n        \n        logo.style.position = 'relative';\n        logo.appendChild(clickIndicator);\n        \n        // Remove indicator after animation\n        setTimeout(() => clickIndicator.remove(), 500);\n    }\n\n    triggerColorBurst(event) {\n        if (this.isActive) return;\n        \n        this.isActive = true;\n        const logo = event.target.closest('.logo');\n        const rect = logo.getBoundingClientRect();\n        const centerX = rect.left + rect.width / 2;\n        const centerY = rect.top + rect.height / 2;\n\n        // Logo flash effect\n        logo.classList.add('color-burst-active');\n        setTimeout(() => logo.classList.remove('color-burst-active'), 800);\n\n        // Create ripple effect\n        this.createRipple(centerX, centerY);\n\n        // Create rainbow wave\n        this.createRainbowWave();\n\n        // Create particle explosion\n        this.createParticleExplosion(centerX, centerY);\n\n        // Create sparkle trails\n        this.createSparkleTrails(centerX, centerY);\n\n        // Play sound if available\n        this.playSound();\n\n        // Reset after animation\n        setTimeout(() => {\n            this.cleanup();\n            this.isActive = false;\n        }, 2500);\n    }\n\n    createRipple(x, y) {\n        for (let i = 0; i < 3; i++) {\n            setTimeout(() => {\n                const ripple = document.createElement('div');\n                ripple.className = 'color-burst-ripple';\n                ripple.style.left = `${x}px`;\n                ripple.style.top = `${y}px`;\n                ripple.style.transform = 'translate(-50%, -50%)';\n                this.container.appendChild(ripple);\n\n                setTimeout(() => ripple.remove(), 1500);\n            }, i * 200);\n        }\n    }\n\n    createRainbowWave() {\n        const wave = document.createElement('div');\n        wave.className = 'rainbow-wave';\n        document.body.appendChild(wave);\n\n        setTimeout(() => wave.remove(), 1500);\n    }\n\n    createParticleExplosion(centerX, centerY) {\n        const particleCount = window.innerWidth <= 768 ? 25 : 40;\n        \n        for (let i = 0; i < particleCount; i++) {\n            setTimeout(() => {\n                const particle = document.createElement('div');\n                particle.className = `color-burst-particle ${this.getRandomSize()}`;\n                \n                // Random color\n                const color = this.colors[Math.floor(Math.random() * this.colors.length)];\n                particle.style.background = `radial-gradient(circle, ${color}, ${color}88)`;\n                particle.style.boxShadow = `0 0 10px ${color}`;\n                \n                // Position at logo center\n                particle.style.left = `${centerX}px`;\n                particle.style.top = `${centerY}px`;\n                particle.style.transform = 'translate(-50%, -50%)';\n                \n                // Random direction and distance\n                const angle = (Math.PI * 2 * i) / particleCount + Math.random() * 0.5;\n                const distance = 100 + Math.random() * 200;\n                const endX = centerX + Math.cos(angle) * distance;\n                const endY = centerY + Math.sin(angle) * distance;\n                \n                // Animate to end position\n                particle.style.setProperty('--end-x', `${endX - centerX}px`);\n                particle.style.setProperty('--end-y', `${endY - centerY}px`);\n                \n                // Custom animation\n                particle.style.animation = `color-burst-explosion 2s ease-out forwards`;\n                particle.style.animationDelay = `${Math.random() * 0.3}s`;\n                \n                this.container.appendChild(particle);\n                this.particles.push(particle);\n\n                setTimeout(() => {\n                    particle.remove();\n                    const index = this.particles.indexOf(particle);\n                    if (index > -1) this.particles.splice(index, 1);\n                }, 2000);\n            }, i * 20);\n        }\n    }\n\n    createSparkleTrails(centerX, centerY) {\n        const sparkleCount = window.innerWidth <= 768 ? 15 : 25;\n        \n        for (let i = 0; i < sparkleCount; i++) {\n            setTimeout(() => {\n                const sparkle = document.createElement('div');\n                sparkle.className = 'color-burst-sparkle';\n                \n                const color = this.colors[Math.floor(Math.random() * this.colors.length)];\n                sparkle.style.color = color;\n                \n                // Random position around logo\n                const offsetX = (Math.random() - 0.5) * 400;\n                const offsetY = (Math.random() - 0.5) * 400;\n                sparkle.style.left = `${centerX + offsetX}px`;\n                sparkle.style.top = `${centerY + offsetY}px`;\n                sparkle.style.transform = 'translate(-50%, -50%)';\n                \n                this.container.appendChild(sparkle);\n\n                setTimeout(() => sparkle.remove(), 1200);\n            }, Math.random() * 800);\n        }\n    }\n\n    getRandomSize() {\n        const rand = Math.random();\n        if (rand < 0.3) return 'small';\n        if (rand < 0.7) return 'medium';\n        return 'large';\n    }\n\n    playSound() {\n        // Create a simple audio context for a satisfying \"pop\" sound\n        try {\n            const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n            const oscillator = audioContext.createOscillator();\n            const gainNode = audioContext.createGain();\n            \n            oscillator.connect(gainNode);\n            gainNode.connect(audioContext.destination);\n            \n            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\n            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.1);\n            \n            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);\n            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);\n            \n            oscillator.start(audioContext.currentTime);\n            oscillator.stop(audioContext.currentTime + 0.1);\n        } catch (e) {\n            // Audio not supported, that's okay\n        }\n    }\n\n    cleanup() {\n        // Remove any remaining particles\n        this.particles.forEach(particle => particle.remove());\n        this.particles = [];\n        \n        // Clean up container\n        while (this.container.firstChild) {\n            this.container.removeChild(this.container.firstChild);\n        }\n    }\n\n    // Public method to trigger effect programmatically\n    trigger() {\n        const logo = document.querySelector('.logo');\n        if (logo) {\n            this.triggerColorBurst({ target: logo });\n        }\n    }\n}\n// Named export of ColorBurstEffect\n","// Modal Manager\n\n// Settings modal\nexport function showSettingsModal(e) {\n    const modal = document.getElementById('settingsModal');\n    if (!modal) {\n        return;\n    }\n\n    modal.style.display = 'flex';\n\n    // Attach event listeners to setting checkboxes\n    const soundCheckbox = document.getElementById('toggleSound');\n    const musicCheckbox = document.getElementById('toggleMusic');\n    const vibrationCheckbox = document.getElementById('toggleVibration');\n\n    if (soundCheckbox) {\n        soundCheckbox.addEventListener('change', (ev) => {\n            localStorage.setItem('soundEnabled', ev.target.checked);\n        });\n    }\n\n    if (musicCheckbox) {\n        musicCheckbox.addEventListener('change', (ev) => {\n            localStorage.setItem('musicEnabled', ev.target.checked);\n        });\n    }\n\n    if (vibrationCheckbox) {\n        vibrationCheckbox.addEventListener('change', (ev) => {\n            localStorage.setItem('vibrationEnabled', ev.target.checked);\n            // Test vibration\n            if (ev.target.checked && window.navigator && window.navigator.vibrate) {\n                window.navigator.vibrate(100);\n            }\n        });\n    }\n\n    // Close modal when clicking outside the content area\n    const handleBackdropClick = (ev) => {\n        // Only close if click is directly on modal (backdrop), not on content\n        const modalContent = modal.querySelector('.settings-modal-content');\n        if (modalContent && modalContent.contains(ev.target)) {\n            return;\n        }\n        \n        closeSettingsModal();\n    };\n\n    // Remove any old handler first\n    if (modal._backdropHandler) {\n        modal.removeEventListener('click', modal._backdropHandler);\n    }\n\n    modal._backdropHandler = handleBackdropClick;\n    modal.addEventListener('click', handleBackdropClick);\n}\n\nexport function closeSettingsModal() {\n    const modal = document.getElementById('settingsModal');\n    if (!modal) {\n        return;\n    }\n\n    modal.style.display = 'none';\n\n    // Remove backdrop click handler\n    if (modal._backdropHandler) {\n        modal.removeEventListener('click', modal._backdropHandler);\n        modal._backdropHandler = null;\n    }\n}\n\n// Generic content modal\nexport function showModal(html) {\n    const modal = document.getElementById('modal');\n    const modalBody = document.getElementById('modal-body');\n    if (modal && modalBody) {\n        modal.style.display = 'flex';\n        modalBody.innerHTML = html;\n    }\n}\n\nexport function closeModal() {\n    const modal = document.getElementById('modal');\n    if (modal) {\n        modal.style.display = 'none';\n    }\n}\n\n// Predefined content modals\nexport function showHowToPlay() {\n    showModal(\n        \"<h2>How to Play</h2><p>Place blocks to fill lines and score points. <br> Use strategy to avoid blocking yourself! <br> <b>Classic:</b> Pure points. <br><b>Collection:</b> Unlock new shapes. <br>Can you beat your high score?</p>\"\n    );\n}\n\nexport function showContact() {\n    showModal(\n        \"<h2>Contact</h2><p>For any questions or feedback, please email:<br><b><a href='mailto:info@blokusblast.com'>info@blokusblast.com</a></b></p>\"\n    );\n}\n\nexport function showAchievements() {\n    showModal(\n        \"<h2>Achievements</h2><ul style='text-align:left;padding-left:0;list-style:none;'><li>ðŸ† High Score: <b>3,400</b></li><li>ðŸ”“ All Pieces Unlocked!</li><li>ðŸ”¥ 10x Streak Bonus</li><li>ðŸ’Ž Discovered Secret Mode</li></ul>\"\n    );\n}\n// Close with Escape key\ndocument.addEventListener('keydown', e => {\n    if (e.key === 'Escape') closeModal();\n});\n\n// Initialize settings from localStorage\nexport function initializeSettings() {\n    const soundCheckbox = document.getElementById('toggleSound');\n    const musicCheckbox = document.getElementById('toggleMusic');\n    const vibrationCheckbox = document.getElementById('toggleVibration');\n\n    // Load from localStorage or default to true\n    if (soundCheckbox) {\n        const soundEnabled = localStorage.getItem('soundEnabled') !== 'false';\n        soundCheckbox.checked = soundEnabled;\n    }\n\n    if (musicCheckbox) {\n        const musicEnabled = localStorage.getItem('musicEnabled') !== 'false';\n        musicCheckbox.checked = musicEnabled;\n    }\n\n    if (vibrationCheckbox) {\n        const vibrationEnabled = localStorage.getItem('vibrationEnabled') !== 'false';\n        vibrationCheckbox.checked = vibrationEnabled;\n    }\n}\n\n// Expose to global scope for inline handlers\nwindow.showSettingsModal = showSettingsModal;\nwindow.closeSettingsModal = closeSettingsModal;\nwindow.showModal = showModal;\nwindow.closeModal = closeModal;\nwindow.showHowToPlay = showHowToPlay;\nwindow.showContact = showContact;\nwindow.showAchievements = showAchievements;\n","// Application bootstrap\n\n// COLOR SCHEME FOR VERSION BADGE\n// Each version gets a new color to track refreshes\nconst VERSION_COLORS = {\n    'v2.3': '#ff0000',  // Red\n    'v2.4': '#ff7700',  // Orange\n    'v2.5': '#ffdd00',  // Yellow\n    'v2.6': '#00ff00',  // Green\n    'v2.7': '#0088ff',  // Blue\n    'v2.8': '#aa00ff',  // Purple\n    'v2.9': '#ff00ff',  // Magenta\n    'v3.0': '#00ffff',  // Cyan\n    'v3.1': '#ff0088',  // Pink\n};\n\n// Initialize version badge with color\nfunction initVersionBadge() {\n    const versionMeta = document.querySelector('meta[name=\"app-version\"]');\n    const version = versionMeta?.getAttribute('content') || 'v0';\n    \n    const versionNumber = document.getElementById('versionNumber');\n    if (versionNumber) {\n        versionNumber.textContent = version;\n    }\n    \n    const badge = document.getElementById('versionBadge');\n    if (badge) {\n        const color = VERSION_COLORS[version] || '#ff0000';\n        badge.style.backgroundColor = color;\n        badge.style.boxShadow = `0 0 20px rgba(${hexToRgb(color)}, 0.8)`;\n    }\n}\n\n// Helper to convert hex to rgb for shadow\nfunction hexToRgb(hex) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (result) {\n        return `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`;\n    }\n    return '255, 0, 0';\n}\n\n// Import core modules (side-effects & initializers)\n// Bootstrapping entry point\n// Bootstrapping entry point\nimport { initLanding } from './landing.js';\nimport { initDarkMode } from './darkMode.js';\nimport { initGameBackground } from './game-background.js';\nimport { ColorBurstEffect } from './colorBurst.js';\n// Modal manager exposes global handlers\nimport './modalManager.js';\n// Import logger\nimport * as logger from './logger.js';\n\n// Print logging guide to console\nfunction printLoggingGuide() {\n\tconsole.clear();\n\tconsole.log('%cðŸŽ® BLOKUS GRID - LOGGING SYSTEM ACTIVE ðŸŽ®', \n\t\t'color: #90CAF9; font-size: 18px; font-weight: bold; text-shadow: 0 0 10px rgba(144, 202, 249, 0.8);');\n\t\n\tconsole.group('%cðŸ“Š CONSOLE LOGGER COMMANDS', 'color: #FFE66D; font-weight: bold; font-size: 14px;');\n\tconsole.log('%cControl Logging:', 'color: #66BB6A; font-weight: bold;');\n\tconsole.log('  â€¢ logger.LOG_ENABLED = false;          // Disable all logging');\n\tconsole.log('  â€¢ logger.LOG_DRAG = false;             // Disable drag-drop logging');\n\tconsole.log('  â€¢ logger.LOG_PLACEMENT = false;        // Disable placement logging');\n\tconsole.log('  â€¢ logger.LOG_SCORE = false;            // Disable score logging');\n\tconsole.log('  â€¢ logger.LOG_PERFORMANCE = false;      // Disable performance metrics');\n\tconsole.log('  â€¢ logger.LOG_GRID = false;             // Disable grid state logging');\n\tconsole.log('  â€¢ logger.LOG_ERRORS = false;           // Disable error logging');\n\tconsole.groupEnd();\n\t\n\tconsole.group('%cðŸ“ WHAT TO LOOK FOR IN CONSOLE', 'color: #95E1D3; font-weight: bold; font-size: 14px;');\n\tconsole.log('%c1. DRAG & DROP EVENTS (Red):', 'color: #FF6B6B; font-weight: bold;');\n\tconsole.log('   - When piece drag starts/moves/ends');\n\tconsole.log('   - Shows if placement is VALID âœ“ or INVALID âœ—');\n\tconsole.log('');\n\tconsole.log('%c2. PLACEMENT & LINE CLEARS (Teal):', 'color: #4ECDC4; font-weight: bold;');\n\tconsole.log('   - When pieces are placed successfully');\n\tconsole.log('   - When lines are cleared');\n\tconsole.log('   - How many cells are freed');\n\tconsole.log('');\n\tconsole.log('%c3. SCORE UPDATES (Yellow):', 'color: #FFE66D; font-weight: bold;');\n\tconsole.log('   - Points earned for placements');\n\tconsole.log('   - Line clear bonuses');\n\tconsole.log('   - Combo multipliers');\n\tconsole.log('');\n\tconsole.log('%c4. PERFORMANCE METRICS (Mint):', 'color: #95E1D3; font-weight: bold;');\n\tconsole.log('   - How long each operation takes (milliseconds)');\n\tconsole.log('   - If any operation takes > 16ms (potential jank)');\n\tconsole.log('');\n\tconsole.log('%c5. GRID STATE (Blue):', 'color: #A8D8EA; font-weight: bold;');\n\tconsole.log('   - Empty cells remaining');\n\tconsole.log('   - Available moves count');\n\tconsole.log('');\n\tconsole.log('%c6. ERRORS & WARNINGS (Red):', 'color: #FF4444; font-weight: bold;');\n\tconsole.log('   - Invalid placements');\n\tconsole.log('   - Missing pieces');\n\tconsole.log('   - Game logic errors');\n\tconsole.groupEnd();\n\t\n\tconsole.group('%cðŸ’¡ HOW TO USE FOR DEBUGGING', 'color: #A8D8EA; font-weight: bold; font-size: 14px;');\n\tconsole.log('%cExample 1: Drag feels laggy', 'color: #FFE66D; font-weight: bold;');\n\tconsole.log('  â†’ Check PERF logs - are movement updates < 16ms?');\n\tconsole.log('  â†’ Check DRAG MOVE logs - is validity check working correctly?');\n\tconsole.log('');\n\tconsole.log('%cExample 2: Placement is broken', 'color: #FFE66D; font-weight: bold;');\n\tconsole.log('  â†’ Check PLACEMENT logs - is piece getting marked as VALID?');\n\tconsole.log('  â†’ Check ERROR logs for rejection reasons');\n\tconsole.log('');\n\tconsole.log('%cExample 3: Score not updating', 'color: #FFE66D; font-weight: bold;');\n\tconsole.log('  â†’ Check SCORE + logs - are points being added?');\n\tconsole.log('  â†’ Check LINE CLEAR logs - are lines detected?');\n\tconsole.log('');\n\tconsole.log('%cExample 4: Game over too early', 'color: #FFE66D; font-weight: bold;');\n\tconsole.log('  â†’ Check GRID STATE logs - when does move count hit 0?');\n\tconsole.log('  â†’ Check PLACEMENT logs - which pieces failed?');\n\tconsole.groupEnd();\n\t\n\tconsole.log('%câœ… Ready to play! Open DevTools (F12) to see real-time logs', \n\t\t'color: #66BB6A; font-size: 12px; font-style: italic;');\n\tconsole.log('');\n\t\n\t// Show detailed performance timing guide\n\tconsole.log('%câ±ï¸ TIP: For DETAILED performance metrics, type in console:', \n\t\t'color: #95E1D3; font-weight: bold;');\n\tconsole.log('  â†’ logger.logPerformanceGuide()');\n\tconsole.log('');\n}\n\n// Bootstrap all modules on DOMContentLoaded\n// Initialize all modules when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n\t// Print logging guide first\n\tprintLoggingGuide();\n\t\n\t// Initialize version badge first\n\tinitVersionBadge();\n\t\n\tinitLanding();\n\tinitDarkMode();\n\tinitGameBackground();\n\n\t// Register service worker for PWA offline support.\n\t// Use absolute path to the repo base so it works on GitHub Pages.\n\ttry {\n\t\tif ('serviceWorker' in navigator) {\n\t\t\t// Register service worker with prefetch check to avoid noisy 404 logs.\n\t\t\t// Try repo base (`/BlokusFocus/sw.js`) first, then fall back to `/sw.js`.\n\t\t\t(async () => {\n\t\t\t\tconst candidates = ['/BlokusFocus/sw.js', '/sw.js'];\n\t\t\t\tfor (const swPath of candidates) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Prefetch to check if the script exists before registration\n\t\t\t\t\t\tconst resp = await fetch(swPath, { method: 'HEAD', cache: 'no-store' });\n\t\t\t\t\t\tif (!resp.ok) {\n\t\t\t\t\t\t\tconsole.debug('SW not found at', swPath);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst reg = await navigator.serviceWorker.register(swPath);\n\t\t\t\t\t\tconsole.log('ServiceWorker registered with', swPath, 'scope:', reg.scope);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.debug('SW registration attempt failed for', swPath);\n\t\t\t\t\t\t// try next candidate\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t} catch (e) {\n\t\tconsole.warn('ServiceWorker registration error', e);\n\t}\n\t// Color burst effect on logo\n\tif (document.querySelector('.logo')) {\n\t\twindow.colorBurstEffect = new ColorBurstEffect();\n\t}\n\t// Highlight special-action buttons on click\n\tconst specialBtns = document.querySelectorAll('.special-actions .action-btn');\n\tspecialBtns.forEach(btn => {\n\t\tbtn.addEventListener('click', () => {\n\t\t\tspecialBtns.forEach(b => b.classList.remove('active'));\n\t\t\tbtn.classList.add('active');\n\t\t});\n\t});\n\n\t// Defer enabling heavy blur effects until the browser is idle\n\tconst enableGlass = () => document.body.classList.add('glass-ready');\n\tif ('requestIdleCallback' in window) {\n\t\trequestIdleCallback(enableGlass, { timeout: 1500 });\n\t} else {\n\t\tsetTimeout(enableGlass, 1200);\n\t}\n\n\t// Modal accessibility: focus management & ESC key\n\tconst modal = document.getElementById('settingsModal');\n\tconst openBtn = document.getElementById('settingsButton');\n\tconst closeBtn = modal?.querySelector('.settings-close');\n\tconst title = document.getElementById('settingsTitle');\n\n\tfunction openSettings() {\n\t\tif (!modal) return;\n\t\tmodal.style.display = 'flex';\n\t\tif (title) setTimeout(() => title.focus(), 50);\n\t\tdocument.addEventListener('keydown', escClose);\n\t}\n\n\tfunction closeSettings() {\n\t\tif (!modal) return;\n\t\tmodal.style.display = 'none';\n\t\tdocument.removeEventListener('keydown', escClose);\n\t\tif (openBtn) openBtn.focus();\n\t}\n\n\tfunction escClose(e) {\n\t\tif (e.key === 'Escape') closeSettings();\n\t}\n\n\topenBtn?.addEventListener('click', openSettings);\n\tcloseBtn?.addEventListener('click', closeSettings);\n});\n"],"file":"assets/index-MZ7qBVzu.js"}